
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>iterators - David</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iterators" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="David" class="md-header__button md-logo" aria-label="David" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            David
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              iterators
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="David" class="md-nav__button md-logo" aria-label="David" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    David
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Books
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Books" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Books
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1" type="checkbox" id="__nav_2_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_1">
          Python Cookbook
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python Cookbook" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Python Cookbook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ipynb/cookbook/" class="md-nav__link">
        Python Cookbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ipynb/cookbook2/" class="md-nav__link">
        Second half
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_2" type="checkbox" id="__nav_2_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_2">
          Python Distilled
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python Distilled" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Python Distilled
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/" class="md-nav__link">
        python structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/classes/" class="md-nav__link">
        classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/io/" class="md-nav__link">
        IO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/builtin/" class="md-nav__link">
        builtins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3">
          Fluent Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fluent Python" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Fluent Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/data-model/" class="md-nav__link">
        data model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/data-structures/" class="md-nav__link">
        data structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/dict-set/" class="md-nav__link">
        dict vs set
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/object-references/" class="md-nav__link">
        object references
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/record-like-data/" class="md-nav__link">
        records
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/text-vs-byts/" class="md-nav__link">
        string and bytes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4" type="checkbox" id="__nav_2_1_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_4">
          Clean Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Clean Code" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          Clean Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_clean_code/" class="md-nav__link">
        clean code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../decorators/" class="md-nav__link">
        decorators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../descriptors/" class="md-nav__link">
        descriptors
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          iterators
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        iterators
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#generators" class="md-nav__link">
    Generators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next" class="md-nav__link">
    next
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#itertools" class="md-nav__link">
    itertools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#takes-first-ten" class="md-nav__link">
    takes first ten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repeated-iterarions-itertoolstee" class="md-nav__link">
    Repeated iterarions itertools.tee
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yelding" class="md-nav__link">
    yelding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iterator-but-not-itarable" class="md-nav__link">
    iterator but not itarable
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequence-ara-iterables" class="md-nav__link">
    Sequence ara iterables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coroutines" class="md-nav__link">
    Coroutines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#close" class="md-nav__link">
    close()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threw" class="md-nav__link">
    threw
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sendvalue" class="md-nav__link">
    send(value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yeld-from" class="md-nav__link">
    Yeld from
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async-programming" class="md-nav__link">
    async programming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async-context-managers" class="md-nav__link">
    async context managers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async-generators" class="md-nav__link">
    async generators
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../design_code/" class="md-nav__link">
        code design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../design_patterns/" class="md-nav__link">
        design patterns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../solid/" class="md-nav__link">
        solid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test_pytest/" class="md-nav__link">
        pytest
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_5" type="checkbox" id="__nav_2_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_5">
          Clean Code examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Clean Code examples" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          Clean Code examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../code/chap4/" class="md-nav__link">
        chap4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../code/chap5/" class="md-nav__link">
        chap5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../code/chap6/" class="md-nav__link">
        chap6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../code/chap7/" class="md-nav__link">
        chap7
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../code/chap8/" class="md-nav__link">
        chap8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../code/chap9/" class="md-nav__link">
        chap9
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Odoo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Odoo" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Odoo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/models/" class="md-nav__link">
        Odoo Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/views/" class="md-nav__link">
        Odoo Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/server_side/" class="md-nav__link">
        server side development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/debug/" class="md-nav__link">
        Odoo debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/xml/" class="md-nav__link">
        Odoo xml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/raw/" class="md-nav__link">
        Advanced Back End
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/tips/" class="md-nav__link">
        Some Tims
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Perfomance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Perfomance" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Perfomance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profiling/profile/" class="md-nav__link">
        profiling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git-branch/" class="md-nav__link">
        Git branch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git-patch/" class="md-nav__link">
        Git patch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git-tools/" class="md-nav__link">
        Git tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../docker/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../k9s/k9s/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../aws/aws/" class="md-nav__link">
        AWS
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Posgresql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Posgresql" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Posgresql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/data_types/" class="md-nav__link">
        data types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/postgresql/" class="md-nav__link">
        overall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/post/" class="md-nav__link">
        additional
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/psql/" class="md-nav__link">
        psql
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/pre-commit/" class="md-nav__link">
        pre-commit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/aactivator/" class="md-nav__link">
        aactivator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../agile/agile/" class="md-nav__link">
        Agile
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#generators" class="md-nav__link">
    Generators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next" class="md-nav__link">
    next
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#itertools" class="md-nav__link">
    itertools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#takes-first-ten" class="md-nav__link">
    takes first ten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repeated-iterarions-itertoolstee" class="md-nav__link">
    Repeated iterarions itertools.tee
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yelding" class="md-nav__link">
    yelding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iterator-but-not-itarable" class="md-nav__link">
    iterator but not itarable
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequence-ara-iterables" class="md-nav__link">
    Sequence ara iterables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coroutines" class="md-nav__link">
    Coroutines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#close" class="md-nav__link">
    close()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threw" class="md-nav__link">
    threw
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sendvalue" class="md-nav__link">
    send(value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yeld-from" class="md-nav__link">
    Yeld from
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async-programming" class="md-nav__link">
    async programming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async-context-managers" class="md-nav__link">
    async context managers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async-generators" class="md-nav__link">
    async generators
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="iterators">iterators</h1>
<h2 id="generators">Generators</h2>
<p>Generators were introduced in Python a long time ago (PEP-255), with the idea
of introducing iteration in Python while improving the performance of the program
(by using less memory) at the same time.
The idea of a generator is to create an object that is iterable, and, while it's being
iterated, will produce the elements it contains, one at a time. The main use of
generators is to save memoryâ€”instead of having a very large list of elements in
memory, holding everything at once, we have an object that knows how to produce
each particular element, one at a time, as it is required.
This feature enables lazy computations of heavyweight objects in memory, in
a similar manner to what other functional programming languages (Haskell,
for instance) provide. It would even be possible to work with infinite sequences
because the lazy nature of generators enables such an option.</p>
<h2 id="next">next</h2>
<p>The next() built-in function will advance the iterable to its next element and
return it:</p>
<h2 id="itertools">itertools</h2>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>  <span class="k">for</span> <span class="n">purchase</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">purchases</span><span class="p">:</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="k">if</span> <span class="n">purchase</span> <span class="o">&gt;</span> <span class="mf">1000.0</span><span class="p">:</span> 
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>      <span class="o">...</span>
</code></pre></div>
This is not only non-Pythonic, but it's also rigid (and rigidity is a trait that denotes
bad code). It doesn't handle changes very well. What if the number changes now?
Do we pass it by parameter? What if we need more than one? What if the condition
is different (less than, for instance)? Do we pass a lambda?
These questions should not be answered by this object, whose sole responsibility
is to compute a set of well-defined metrics over a stream of purchases represented
as numbers. And, of course, the answer is no. It would be a huge mistake to make
such a change (once again, clean code is flexible, and we don't want to make it
rigid by coupling this object to external factors). These requirements will have
to be addressed elsewhere.</p>
<h2 id="takes-first-ten">takes first ten</h2>
<p>from itertools import islice
purchases = islice(filter(lambda p: p &gt; 1000.0, purchases), 10)</p>
<p>There is no memory penalization for filtering this way because since they are all
generators, the evaluation is always lazy. This gives us the power of thinking as
if we had filtered the entire set at once and then passed it to the object, but without
actually fitting everything in memory.
Keep in mind the trade-off mentioned at the beginning of the chapter, between
memory and CPU usage. While the code might use less memory, it could take up
more CPU time, but most of the times, this is acceptable, when we have to process
lots of objects in memory while keeping the code maintainable.</p>
<h2 id="repeated-iterarions-itertoolstee">Repeated iterarions itertools.tee</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">def</span> <span class="nf">process_purchases</span><span class="p">(</span><span class="n">purchases</span><span class="p">):</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>  <span class="n">min_</span><span class="p">,</span> <span class="n">max_</span><span class="p">,</span> <span class="n">avg</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">tee</span><span class="p">(</span><span class="n">purchases</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>  <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_</span><span class="p">),</span> <span class="n">median</span><span class="p">(</span><span class="n">avg</span><span class="p">)</span>
</code></pre></div>
<p>In this example, itertools.tee will split the original iterable into three new ones.
We will use each of these for the different kinds of iterations that we require, without
needing to repeat three different loops over purchases.</p>
<h2 id="yelding">yelding</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">def</span> <span class="nf">_iterate_array2d</span><span class="p">(</span><span class="n">array2d</span><span class="p">):</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">array2d</span><span class="p">):</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">cell</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>        <span class="k">yield</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span> <span class="n">cell</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="k">def</span> <span class="nf">search_nested</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">desired_value</span><span class="p">):</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>  <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>  <span class="n">coord</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>  <span class="n">coord</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>  <span class="k">for</span> <span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span> <span class="ow">in</span> <span class="n">_iterate_array2d</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>  <span class="k">if</span> <span class="n">cell</span> <span class="o">==</span> <span class="n">desired_value</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>  <span class="p">)</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>  <span class="k">except</span> <span class="ne">StopIteration</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>  <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">desired_value</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>  <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;value </span><span class="si">%r</span><span class="s2"> found at [</span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">desired_value</span><span class="p">,</span> <span class="o">*</span><span class="n">coord</span><span class="p">)</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>  <span class="k">return</span> <span class="n">coord</span>
</code></pre></div>
<h2 id="iterator-but-not-itarable">iterator but not itarable</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">class</span> <span class="nc">SequenceIterator</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="n">start</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="n">step</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>  <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>    <span class="k">return</span> <span class="n">value</span>
</code></pre></div>
<h2 id="sequence-ara-iterables">Sequence ara iterables</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">class</span> <span class="nc">MappedRange</span><span class="p">:</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="sd">&quot;&quot;&quot;Apply a transformation to a range of numbers.&quot;&quot;&quot;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformation</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_transformation</span> <span class="o">=</span> <span class="n">transformation</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>  <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a>    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transformation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Index </span><span class="si">%d</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a>    <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a>  <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a>    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span><span class="p">)</span>
</code></pre></div>
<h2 id="coroutines">Coroutines</h2>
<ul>
<li>.close()</li>
<li>.throw()</li>
<li>.send()</li>
</ul>
<p>Python takes advantage of generators in order to create coroutines. Because
generators can naturally suspend, they're a convenient starting point. But generators
weren't enough as they were originally thought to be, so these methods were added.
This is because typically, it's not enough to just be able to suspend some part of the
code; you'd also want to communicate with it (pass data, and signal about changes
in the context)</p>
<h2 id="close">close()</h2>
<p>When calling this method, the generator will receive the GeneratorExit exception.
If it's not handled, then the generator will finish without producing any more values,
and its iteration will stop.</p>
<h2 id="threw">threw</h2>
<p>This method will throw the exception at the line where the generator is currently
suspended. If the generator handles the exception that was sent, the code in that
particular except clause will be called; otherwise, the exception will propagate to
the caller.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">def</span> <span class="nf">stream_data</span><span class="p">(</span><span class="n">db_handler</span><span class="p">):</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>      <span class="k">yield</span> <span class="n">db_handler</span><span class="o">.</span><span class="n">read_n_records</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>    <span class="k">except</span> <span class="n">CustomException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>      <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;controlled error </span><span class="si">%r</span><span class="s2">, continuing&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>      <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;unhandled error </span><span class="si">%r</span><span class="s2">, stopping&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>      <span class="n">db_handler</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>      <span class="k">break</span>
</code></pre></div>
<h2 id="sendvalue">send(value)</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">def</span> <span class="nf">stream_db_records</span><span class="p">(</span><span class="n">db_handler</span><span class="p">):</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>  <span class="n">retrieved_data</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>  <span class="n">previous_page_size</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>  <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>      <span class="n">page_size</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">retrieved_data</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>    <span class="k">if</span> <span class="n">page_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>      <span class="n">page_size</span> <span class="o">=</span> <span class="n">previous_page_size</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>    <span class="n">previous_page_size</span> <span class="o">=</span> <span class="n">page_size</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>    <span class="n">retrieved_data</span> <span class="o">=</span> <span class="n">db_handler</span><span class="o">.</span><span class="n">read_n_records</span><span class="p">(</span><span class="n">page_size</span><span class="p">)</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a>  <span class="k">except</span> <span class="ne">GeneratorExit</span><span class="p">:</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a>    <span class="n">db_handler</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p>First None </p>
<h2 id="yeld-from">Yeld from</h2>
<p>yeld from iterable</p>
<h2 id="async-programming">async programming</h2>
<h2 id="async-context-managers">async context managers</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nd">@contextlib</span><span class="o">.</span><span class="n">asynccontextmanager</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">db_management</span><span class="p">():</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>  <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>    <span class="k">await</span> <span class="n">stop_database</span><span class="p">()</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>    <span class="k">yield</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>  <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>    <span class="k">await</span> <span class="n">start_database</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kn">import</span> <span class="nn">asyncio</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kn">import</span> <span class="nn">random</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">coroutine</span><span class="p">():</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>  <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>  <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="k">class</span> <span class="nc">RecordStreamer</span><span class="p">:</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_current_row</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_max_rows</span> <span class="o">=</span> <span class="n">max_rows</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>  <span class="k">def</span> <span class="fm">__aiter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a>    <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a>  <span class="k">async</span> <span class="k">def</span> <span class="fm">__anext__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_row</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_rows</span><span class="p">:</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a>      <span class="n">row</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_row</span><span class="p">,</span> <span class="k">await</span> <span class="n">coroutine</span><span class="p">())</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a>      <span class="bp">self</span><span class="o">.</span><span class="n">_current_row</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a>      <span class="k">return</span> <span class="n">row</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a>    <span class="k">raise</span> <span class="ne">StopAsyncIteration</span>
</code></pre></div>
<p>await async_iterator.<strong>anext</strong>()</p>
<h2 id="async-generators">async generators</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">record_streamer</span><span class="p">(</span><span class="n">max_rows</span><span class="p">):</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>  <span class="n">current_row</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>  <span class="k">while</span> <span class="n">current_row</span> <span class="o">&lt;</span> <span class="n">max_rows</span><span class="p">:</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>    <span class="n">row</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_row</span><span class="p">,</span> <span class="k">await</span> <span class="n">coroutine</span><span class="p">())</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>    <span class="n">current_row</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>    <span class="k">yield</span> <span class="n">row</span>
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../descriptors/" class="md-footer__link md-footer__link--prev" aria-label="Previous: descriptors" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              descriptors
            </div>
          </div>
        </a>
      
      
        
        <a href="../design_code/" class="md-footer__link md-footer__link--next" aria-label="Next: code design" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              code design
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>