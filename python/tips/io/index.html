
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>IO - David</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#io" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="David" class="md-header__button md-logo" aria-label="David" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            David
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IO
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="David" class="md-nav__button md-logo" aria-label="David" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    David
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Recipes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Recipes" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Recipes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1" type="checkbox" id="__nav_2_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_1">
          Python Cookbook
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python Cookbook" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Python Cookbook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ipynb/cookbook/" class="md-nav__link">
        Python Cookbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ipynb/cookbook2/" class="md-nav__link">
        Second half
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_2" type="checkbox" id="__nav_2_1_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_2">
          Python Distilled
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python Distilled" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Python Distilled
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        python structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../classes/" class="md-nav__link">
        classes
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          IO
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        IO
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-representation" class="md-nav__link">
    data representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-encoding-and-decoding" class="md-nav__link">
    text encoding and decoding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-and-byte-formatting" class="md-nav__link">
    text and byte formatting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-arguments" class="md-nav__link">
    command line arguments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env-variables" class="md-nav__link">
    env variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buffering" class="md-nav__link">
    buffering
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-mode-enxoding" class="md-nav__link">
    text mode enxoding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#newline" class="md-nav__link">
    newline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behind-in-scenes" class="md-nav__link">
    behind in scenes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-methods" class="md-nav__link">
    file methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-attributes" class="md-nav__link">
    file attributes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stdin-stdout-stderr" class="md-nav__link">
    stdin, stdout, stderr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directories" class="md-nav__link">
    directories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    print
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consume-input" class="md-nav__link">
    consume input
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#object-serializations" class="md-nav__link">
    object serializations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blocking-operations-and-concurency" class="md-nav__link">
    blocking operations and concurency
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nonblocking-io" class="md-nav__link">
    nonblocking io
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-polling" class="md-nav__link">
    IO polling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threading" class="md-nav__link">
    threading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncio" class="md-nav__link">
    asyncio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncio-tcp-socket" class="md-nav__link">
    asyncio tcp socket
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binascii" class="md-nav__link">
    binascii
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cgi-module" class="md-nav__link">
    cgi module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configparser" class="md-nav__link">
    configparser
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#errorno" class="md-nav__link">
    errorno
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fcntl-module" class="md-nav__link">
    fcntl module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hashlib" class="md-nav__link">
    hashlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https-package" class="md-nav__link">
    https package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io_1" class="md-nav__link">
    io
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pathlib" class="md-nav__link">
    pathlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re" class="md-nav__link">
    re
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shutil" class="md-nav__link">
    shutil
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select" class="md-nav__link">
    select
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smtlib" class="md-nav__link">
    smtlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#socket" class="md-nav__link">
    socket
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#struct" class="md-nav__link">
    struct
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../builtin/" class="md-nav__link">
        builtins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3">
          Fluent Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fluent Python" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Fluent Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/data-model/" class="md-nav__link">
        data model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/data-structures/" class="md-nav__link">
        data structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/dict-set/" class="md-nav__link">
        dict vs set
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/object-references/" class="md-nav__link">
        object references
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/record-like-data/" class="md-nav__link">
        records
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fluent/text-vs-byts/" class="md-nav__link">
        string and bytes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Odoo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Odoo" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Odoo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/models/" class="md-nav__link">
        Odoo Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/views/" class="md-nav__link">
        Odoo Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/server_side/" class="md-nav__link">
        server side development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/debug/" class="md-nav__link">
        Odoo debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/xml/" class="md-nav__link">
        Odoo xml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/raw/" class="md-nav__link">
        Advanced Back End
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../odoo/tips/" class="md-nav__link">
        Some Tims
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Perfomance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Perfomance" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Perfomance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profiling/profile/" class="md-nav__link">
        profiling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git-branch/" class="md-nav__link">
        Git branch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git-patch/" class="md-nav__link">
        Git patch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../git/git-tools/" class="md-nav__link">
        Git tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../docker/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../k9s/k9s/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../aws/aws/" class="md-nav__link">
        AWS
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Posgresql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Posgresql" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Posgresql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/data_types/" class="md-nav__link">
        data types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/postgresql/" class="md-nav__link">
        overall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/post/" class="md-nav__link">
        additional
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../postgresql/psql/" class="md-nav__link">
        psql
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/pre-commit/" class="md-nav__link">
        pre-commit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/aactivator/" class="md-nav__link">
        aactivator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../agile/agile/" class="md-nav__link">
        Agile
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-representation" class="md-nav__link">
    data representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-encoding-and-decoding" class="md-nav__link">
    text encoding and decoding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-and-byte-formatting" class="md-nav__link">
    text and byte formatting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-arguments" class="md-nav__link">
    command line arguments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env-variables" class="md-nav__link">
    env variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buffering" class="md-nav__link">
    buffering
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-mode-enxoding" class="md-nav__link">
    text mode enxoding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#newline" class="md-nav__link">
    newline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behind-in-scenes" class="md-nav__link">
    behind in scenes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-methods" class="md-nav__link">
    file methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-attributes" class="md-nav__link">
    file attributes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stdin-stdout-stderr" class="md-nav__link">
    stdin, stdout, stderr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directories" class="md-nav__link">
    directories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    print
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consume-input" class="md-nav__link">
    consume input
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#object-serializations" class="md-nav__link">
    object serializations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blocking-operations-and-concurency" class="md-nav__link">
    blocking operations and concurency
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nonblocking-io" class="md-nav__link">
    nonblocking io
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-polling" class="md-nav__link">
    IO polling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threading" class="md-nav__link">
    threading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncio" class="md-nav__link">
    asyncio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asyncio-tcp-socket" class="md-nav__link">
    asyncio tcp socket
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binascii" class="md-nav__link">
    binascii
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cgi-module" class="md-nav__link">
    cgi module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configparser" class="md-nav__link">
    configparser
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#errorno" class="md-nav__link">
    errorno
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fcntl-module" class="md-nav__link">
    fcntl module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hashlib" class="md-nav__link">
    hashlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https-package" class="md-nav__link">
    https package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io_1" class="md-nav__link">
    io
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pathlib" class="md-nav__link">
    pathlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re" class="md-nav__link">
    re
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shutil" class="md-nav__link">
    shutil
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select" class="md-nav__link">
    select
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smtlib" class="md-nav__link">
    smtlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#socket" class="md-nav__link">
    socket
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#struct" class="md-nav__link">
    struct
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="io">IO</h1>
<h2 id="data-representation">data representation</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># Specify a bytes literal (note: b&#39; prefix)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="n">a</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;hello&#39;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1"># Specify bytes from a list of integers</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="n">b</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span><span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">])</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="c1"># Create and populate a bytearray from parts</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="n">c</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="n">c</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>   <span class="c1"># d = &#39;world&#39;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="n">c</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mh">0x21</span><span class="p">)</span>       <span class="c1"># d = &#39;world!&#39;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="c1"># Access byte values</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>     <span class="c1"># --&gt; prints 104</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">b</span><span class="p">:</span>     <span class="c1"># Outputs 104 101 108 108 111</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>   <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">a</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;hello&#39;</span>     <span class="c1"># bytes</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>      <span class="c1"># text</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;world&#39;</span>      <span class="c1"># text</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span>    <span class="c1"># -&gt; False</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="n">d</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">c</span>        <span class="c1"># TypeError: can&#39;t concat str to bytes</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="n">e</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>        <span class="c1"># -&gt; &#39;helloworld&#39; (both are strings)</span>
</code></pre></div>
<h2 id="text-encoding-and-decoding">text encoding and decoding</h2>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>             <span class="c1"># Text</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>   <span class="c1"># Encode to bytes</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="n">c</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;world&#39;</span>            <span class="c1"># Bytes</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="n">d</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>   <span class="c1"># Decode to text</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>&#39;ascii&#39;
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>Character values in the range [0x00, 0x7f].
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>&#39;latin1&#39;
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>Character values in the range [0x00, 0xff]. Also known as &#39;iso-8859-1&#39;.
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>&#39;utf-8&#39;
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>Variable-length encoding that allows all Unicode characters to be represented.
<a id="__codelineno-3-12" name="__codelineno-3-12"></a>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>&#39;cp1252&#39;
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>A common text encoding on Windows.
<a id="__codelineno-3-16" name="__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>&#39;macroman&#39;
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>A common text encoding on Macintosh.
</code></pre></div></p>
<h2 id="text-and-byte-formatting">text and byte formatting</h2>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">x</span> <span class="o">=</span> <span class="mf">123.456</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;0.2f&#39;</span><span class="p">)</span>       <span class="c1"># &#39;123.46&#39;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;10.4f&#39;</span><span class="p">)</span>      <span class="c1"># &#39;  123.4560&#39;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;&lt;*10.2f&#39;</span><span class="p">)</span>    <span class="c1"># &#39;123.46****&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Elwood&#39;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&lt;10&#39;</span><span class="p">)</span>     <span class="c1"># r = &#39;Elwood    &#39;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&gt;10&#39;</span><span class="p">)</span>     <span class="c1"># r = &#39;    Elwood&#39;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;^10&#39;</span><span class="p">)</span>     <span class="c1"># r = &#39;  Elwood  &#39;</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;*^10&#39;</span><span class="p">)</span>    <span class="c1"># r = &#39;**Elwood**&#39;</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>d
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>Decimal integer or long integer.
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>b
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>Binary integer or long integer.
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>o
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a>Octal integer or long integer.
<a id="__codelineno-6-12" name="__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>x
<a id="__codelineno-6-14" name="__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a>Hexadecimal integer or long integer.
<a id="__codelineno-6-16" name="__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a>X
<a id="__codelineno-6-18" name="__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a>Hexadecimal integer (uppercase letters).
<a id="__codelineno-6-20" name="__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a>f, F
<a id="__codelineno-6-22" name="__codelineno-6-22"></a>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a>Floating point as [-]m.dddddd.
<a id="__codelineno-6-24" name="__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a>e
<a id="__codelineno-6-26" name="__codelineno-6-26"></a>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a>Floating point as [-]m.dddddde±xx.
<a id="__codelineno-6-28" name="__codelineno-6-28"></a>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a>E
<a id="__codelineno-6-30" name="__codelineno-6-30"></a>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a>Floating point as [-]m.ddddddE±xx.
<a id="__codelineno-6-32" name="__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33"></a>g, G
<a id="__codelineno-6-34" name="__codelineno-6-34"></a>
<a id="__codelineno-6-35" name="__codelineno-6-35"></a>Use e or E for exponents less than [nd]4 or greater than the precision; otherwise use f.
<a id="__codelineno-6-36" name="__codelineno-6-36"></a>
<a id="__codelineno-6-37" name="__codelineno-6-37"></a>n
<a id="__codelineno-6-38" name="__codelineno-6-38"></a>
<a id="__codelineno-6-39" name="__codelineno-6-39"></a>Same as g except that the current locale setting determines the decimal point character.
<a id="__codelineno-6-40" name="__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41"></a>%
<a id="__codelineno-6-42" name="__codelineno-6-42"></a>
<a id="__codelineno-6-43" name="__codelineno-6-43"></a>Multiplies a number by 100 and displays it using f format followed by a % sign.
<a id="__codelineno-6-44" name="__codelineno-6-44"></a>
<a id="__codelineno-6-45" name="__codelineno-6-45"></a>s
<a id="__codelineno-6-46" name="__codelineno-6-46"></a>
<a id="__codelineno-6-47" name="__codelineno-6-47"></a>String or any object. The formatting code uses str() to generate strings.
<a id="__codelineno-6-48" name="__codelineno-6-48"></a>
<a id="__codelineno-6-49" name="__codelineno-6-49"></a>c
<a id="__codelineno-6-50" name="__codelineno-6-50"></a>
<a id="__codelineno-6-51" name="__codelineno-6-51"></a>Single character.
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">x</span> <span class="o">=</span> <span class="mi">42</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;10d&#39;</span><span class="p">)</span>        <span class="c1"># r = &#39;        42&#39;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;10x&#39;</span><span class="p">)</span>        <span class="c1"># r = &#39;        2a&#39;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;10b&#39;</span><span class="p">)</span>        <span class="c1"># r = &#39;    101010&#39;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;010b&#39;</span><span class="p">)</span>       <span class="c1"># r = &#39;0000101010&#39;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="n">y</span> <span class="o">=</span> <span class="mf">3.1415926</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;10.2f&#39;</span><span class="p">)</span>      <span class="c1"># r = &#39;      3.14&#39;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;10.2e&#39;</span><span class="p">)</span>      <span class="c1"># r = &#39;  3.14e+00&#39;</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;+10.2f&#39;</span><span class="p">)</span>     <span class="c1"># r = &#39;     +3.14&#39;</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;+010.2f&#39;</span><span class="p">)</span>    <span class="c1"># r = &#39;+000003.14&#39;</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="n">r</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;+10.2%&#39;</span><span class="p">)</span>     <span class="c1"># r = &#39;  +314.16%&#39;</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="sa">f</span><span class="s1">&#39;Value is </span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">0.2f</span><span class="si">}</span><span class="s1">&#39;</span>        <span class="c1"># &#39;Value is 123.46&#39;</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="sa">f</span><span class="s1">&#39;Value is </span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">10.4f</span><span class="si">}</span><span class="s1">&#39;</span>       <span class="c1"># &#39;Value is   123.4560&#39;</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="sa">f</span><span class="s1">&#39;Value is </span><span class="si">{</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="si">:</span><span class="s1">*&lt;10.2f</span><span class="si">}</span><span class="s1">&#39;</span>   <span class="c1"># &#39;Value is 246.91****&#39;</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">!r:</span><span class="s1">spec</span><span class="si">}</span><span class="s1">&#39;</span>      <span class="c1"># Calls (repr(x).__format__(&#39;spec&#39;))</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">!s:</span><span class="s1">spec</span><span class="si">}</span><span class="s1">&#39;</span>      <span class="c1"># Calls (str(x).__format__(&#39;spec&#39;))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="s1">&#39;Value is </span><span class="si">{:0.2f}</span><span class="s1">&#39;</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>            <span class="c1"># &#39;Value is 123.46&#39;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="s1">&#39;Value is </span><span class="si">{0:10.2f}</span><span class="s1">&#39;</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>          <span class="c1"># &#39;Value is   123.4560&#39;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="s1">&#39;Value is {val:&lt;*10.2f}&#39;</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># &#39;Value is 123.46****&#39;</span>
</code></pre></div></p>
<p>Unlike f-strings, the arg value of a specifier cannot be an arbitrary expression, so it’s not quite as expressive. However, the format() method can perform limited attribute lookup, indexing, and nested substitutions. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">y</span> <span class="o">=</span> <span class="mf">3.1415926</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="n">width</span> <span class="o">=</span> <span class="mi">8</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="n">precision</span><span class="o">=</span><span class="mi">3</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="n">r</span> <span class="o">=</span> <span class="s1">&#39;Value is {0:</span><span class="si">{1}</span><span class="s1">.</span><span class="si">{2}</span><span class="s1">f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">precision</span><span class="p">)</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a>   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;IBM&#39;</span><span class="p">,</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a>   <span class="s1">&#39;shares&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a>   <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="mf">490.1</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="p">}</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="n">r</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0[shares]:d}</span><span class="s1"> shares of </span><span class="si">{0[name]}</span><span class="s1"> at </span><span class="si">{0[price]:0.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="c1"># r = &#39;50 shares of IBM at 490.10&#39;</span>
</code></pre></div>
<h2 id="command-line-arguments">command line arguments</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>              <span class="sa">f</span><span class="s1">&#39;Usage : python </span><span class="si">{</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> inputfile outputfile</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>    <span class="n">inputfile</span>  <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>    <span class="n">outputfile</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>    <span class="o">...</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a>    <span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a>    <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="kn">import</span> <span class="nn">argparse</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a>    <span class="n">p</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;This is some program&#39;</span><span class="p">)</span>
<a id="__codelineno-11-17" name="__codelineno-11-17"></a>
<a id="__codelineno-11-18" name="__codelineno-11-18"></a>    <span class="c1"># A positional argument</span>
<a id="__codelineno-11-19" name="__codelineno-11-19"></a>    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infile&#39;</span><span class="p">)</span>
<a id="__codelineno-11-20" name="__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21"></a>    <span class="c1"># An option taking an argument</span>
<a id="__codelineno-11-22" name="__codelineno-11-22"></a>    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span><span class="s1">&#39;--output&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">)</span>
<a id="__codelineno-11-23" name="__codelineno-11-23"></a>
<a id="__codelineno-11-24" name="__codelineno-11-24"></a>    <span class="c1"># An option that sets a boolean flag</span>
<a id="__codelineno-11-25" name="__codelineno-11-25"></a>    <span class="n">p</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span><span class="s1">&#39;--debug&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-11-26" name="__codelineno-11-26"></a>
<a id="__codelineno-11-27" name="__codelineno-11-27"></a>    <span class="c1"># Parse the command line</span>
<a id="__codelineno-11-28" name="__codelineno-11-28"></a>    <span class="n">args</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">argv</span><span class="p">)</span>
<a id="__codelineno-11-29" name="__codelineno-11-29"></a>
<a id="__codelineno-11-30" name="__codelineno-11-30"></a>    <span class="c1"># Retrieve the option settings</span>
<a id="__codelineno-11-31" name="__codelineno-11-31"></a>    <span class="n">infile</span>    <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">infile</span>
<a id="__codelineno-11-32" name="__codelineno-11-32"></a>    <span class="n">output</span>    <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">output</span>
<a id="__codelineno-11-33" name="__codelineno-11-33"></a>    <span class="n">debugmode</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span>
<a id="__codelineno-11-34" name="__codelineno-11-34"></a>
<a id="__codelineno-11-35" name="__codelineno-11-35"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">debugmode</span><span class="p">)</span>
<a id="__codelineno-11-36" name="__codelineno-11-36"></a>
<a id="__codelineno-11-37" name="__codelineno-11-37"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<a id="__codelineno-11-38" name="__codelineno-11-38"></a>    <span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-11-39" name="__codelineno-11-39"></a>    <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</code></pre></div>
<h2 id="env-variables">env variables</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;PATH&#39;</span><span class="p">]</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="n">user</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;USER&#39;</span><span class="p">]</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="n">editor</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;EDITOR&#39;</span><span class="p">]</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="n">val</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SOMEVAR&#39;</span><span class="p">]</span>
</code></pre></div>
<h2 id="buffering">buffering</h2>
<p>By default, files are opened with I/O buffering enabled. With I/O buffering, I/O operations are performed in larger chunks to avoid excessive system calls. For example, write operations would start filling an internal memory buffer and output would only actually occur when the buffer is filled up. This behavior can be changed by giving a buffering argument to open(). For example</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">,</span> <span class="n">buffering</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>    <span class="n">file</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>       <span class="c1"># Make sure all data is written from buffers</span>
</code></pre></div>
<h2 id="text-mode-enxoding">text mode enxoding</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rt&#39;</span><span class="p">,</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>          <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>
<h2 id="newline">newline</h2>
<p>With text files, one complication is the encoding of newline characters. Newlines are encoded as '\n', '\r\n', or '\r' depending on the host operating system—for example, '\n' on UNIX and '\r\n' on Windows. By default, Python translates all of these line endings to a standard '\n' character when reading. On writing, newline characters are translated back to the default line ending used on the system. The behavior is sometimes referred to as “universal newline mode” in Python documentation.
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;somefile.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rt&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="behind-in-scenes">behind in scenes</h2>
<p>The open() function serves as a kind of high-level factory function for creating instances of different I/O classes. These classes embody the different file modes, encodings, and buffering behaviors. They are also composed together in layers. The following classes are defined in the io module:</p>
<p>Click here to view code image</p>
<p>FileIO(filename, mode='r', closefd=True, opener=None)
Opens a file for raw unbuffered binary I/O. filename is any valid filename accepted by the open() function. Other arguments have the same meaning as for open().</p>
<p>Click here to view code image</p>
<p>BufferedReader(file [, buffer_size])
BufferedWriter(file [, buffer_size])
BufferedRandom(file,[, buffer_size])
Implements a buffered binary I/O layer for a file. file is an instance of FileIO. buffer_size specifies the internal buffer size to use. The choice of class depends on whether or not the file is reading, writing, or updating data. The optional buffer_size argument specifies the internal buffer size used.</p>
<p>Click here to view code image</p>
<p>TextIOWrapper(buffered, [encoding, [errors [, newline [, line_buffering [, write_through]]]]])
Implements text mode I/O. buffered is a buffered binary mode file, such as BufferedReader or BufferedWriter. The encoding, errors, and newline arguments have the same meaning as for open(). line_buffering is a Boolean flag that forces I/O to be flushed on newline characters (False by default). write_through is a Boolean flag that forces all writes to be flushed (False by default).</p>
<p>Here is an example that shows how a text-mode file is constructed, layer-by-layer:</p>
<p>Click here to view code image</p>
<blockquote>
<blockquote>
<blockquote>
<p>raw = io.FileIO('filename.txt', 'r')        # Raw-binary mode
buffer = io.BufferedReader(raw)      # Binary buffered reader
file = io.TextIOWrapper(buffer, encoding='utf-8') # Text mode
</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="file-methods">file methods</h2>
<p>f.readable()</p>
<p>Returns True if file can be read.</p>
<p>f.read([n])</p>
<p>Reads at most n bytes.</p>
<p>f.readline([n])</p>
<p>Reads a single line of input up to n characters. If n is omitted, this method reads the entire line.</p>
<p>f.readlines([size])</p>
<p>Reads all the lines and returns a list. size optionally specifies the approximate number of characters to read on the file before stopping.</p>
<p>f.readinto(buffer)</p>
<p>Reads data into a memory buffer.</p>
<p>f.writable()</p>
<p>Returns True if file can be written.</p>
<p>f.write(s)</p>
<p>Writes string s.</p>
<p>f.writelines(lines)</p>
<p>Writes all strings in iterable lines.</p>
<p>f.close()</p>
<p>Closes the file.</p>
<p>f.seekable()</p>
<p>Returns True if file supports random-access seeking.</p>
<p>f.tell()</p>
<p>Returns the current file pointer.</p>
<p>f.seek(offset [, where])</p>
<p>Seeks to a new file position.</p>
<p>f.isatty()</p>
<p>Returns True if f is an interactive terminal.</p>
<p>f.flush()</p>
<p>Flushes the output buffers.</p>
<p>f.truncate([size])</p>
<p>Truncates the file to at most size bytes.</p>
<p>f.fileno()</p>
<p>Returns an integer file descriptor.</p>
<h2 id="file-attributes">file attributes</h2>
<p>f.closed</p>
<p>Boolean value indicates the file state: False if the file is open, True if closed.</p>
<p>f.mode</p>
<p>The I/O mode for the file.</p>
<p>f.name</p>
<p>Name of the file if created using open(). Otherwise, it will be a string indicating the source of the file.</p>
<p>f.newlines</p>
<p>The newline representation actually found in the file. The value is either None if no newlines have been encountered, a string containing '\n', '\r', or '\r\n', or a tuple containing all the different newline encodings seen.</p>
<p>f.encoding</p>
<p>A string that indicates file encoding, if any (for example, 'latin-1' or 'utf-8'). The value is None if no encoding is being used.</p>
<p>f.errors</p>
<p>The error handling policy.</p>
<p>f.write_through</p>
<p>Boolean value indicating if writes on a text file pass data directly to the underlying binary level file without buffering.</p>
<h2 id="stdin-stdout-stderr">stdin, stdout, stderr</h2>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Enter your name : &#39;</span><span class="p">)</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="n">name</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</code></pre></div>
If necessary, the values of sys.stdout, sys.stdin, and sys.stderr can be replaced with other file objects, in which case the print() and input() functions will use the new values. Should it ever be necessary to restore the original value of sys.stdout, it should be saved first. The original values of sys.stdout, sys.stdin, and sys.stderr at interpreter startup are also available in sys.<strong>stdout</strong>, sys.<strong>stdin</strong>, and sys.<strong>stderr</strong>, respectively.</p>
<h2 id="directories">directories</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="n">names</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;dirname&#39;</span><span class="p">)</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<h2 id="print">print</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The values are&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="c1"># Suppress the newline</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The values are&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="n">To</span> <span class="n">redirect</span> <span class="n">the</span> <span class="n">output</span> <span class="n">to</span> <span class="n">a</span> <span class="n">file</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">file</span> <span class="n">keyword</span> <span class="n">argument</span><span class="p">:</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="c1"># Redirect to file object f</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The values are&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="n">To</span> <span class="n">change</span> <span class="n">the</span> <span class="n">separator</span> <span class="n">character</span> <span class="n">between</span> <span class="n">items</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">sep</span> <span class="n">keyword</span> <span class="n">argument</span><span class="p">:</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="c1"># Put commas between the values</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The values are&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="consume-input">consume input</h2>
<p>use advance generator for io </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">def</span> <span class="nf">line_receiver</span><span class="p">():</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a>    <span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>    <span class="n">line</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a>    <span class="n">linecount</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>        <span class="n">part</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">line</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>        <span class="n">linecount</span> <span class="o">+=</span> <span class="n">part</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a>        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a>        <span class="k">if</span> <span class="n">linecount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a>            <span class="n">index</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a>            <span class="n">line</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">[:</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a>            <span class="n">linecount</span> <span class="o">-=</span> <span class="mi">1</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a>            <span class="n">line</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a>&gt;&gt;&gt; r = line_receiver()
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>&gt;&gt;&gt; r.send(None)    # Necessary first step
<a id="__codelineno-20-3" name="__codelineno-20-3"></a>&gt;&gt;&gt; r.send(b&#39;hello&#39;)
<a id="__codelineno-20-4" name="__codelineno-20-4"></a>&gt;&gt;&gt; r.send(b&#39;world\nit &#39;)
<a id="__codelineno-20-5" name="__codelineno-20-5"></a>b&#39;hello world\n&#39;
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>&gt;&gt;&gt; r.send(b&#39;works!&#39;)
<a id="__codelineno-20-7" name="__codelineno-20-7"></a>&gt;&gt;&gt; r.send(b&#39;\n&#39;)
<a id="__codelineno-20-8" name="__codelineno-20-8"></a>b&#39;it works!\n&#39;&#39;
<a id="__codelineno-20-9" name="__codelineno-20-9"></a>&gt;&gt;&gt;
</code></pre></div>
An interesting side effect of this approach is that it externalizes the actual I/O operations that must be performed to get the input data. Specifically, the implementation of line_receiver() contains no I/O operations at all! This means that it could be used in different contexts. For example, with sockets:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">r</span> <span class="o">=</span> <span class="n">line_receiver</span><span class="p">()</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="n">line</span><span class="o">:=</span><span class="n">r</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">8192</span><span class="p">)</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a>    <span class="c1"># Process the line</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a>    <span class="o">...</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="n">r</span> <span class="o">=</span> <span class="n">line_receiver</span><span class="p">()</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="n">line</span><span class="o">:=</span><span class="n">r</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a>    <span class="c1"># Process the line</span>
<a id="__codelineno-21-17" name="__codelineno-21-17"></a>    <span class="o">...</span>
<a id="__codelineno-21-18" name="__codelineno-21-18"></a>
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">reader</span><span class="p">(</span><span class="n">ch</span><span class="p">):</span>
<a id="__codelineno-21-20" name="__codelineno-21-20"></a>    <span class="n">r</span> <span class="o">=</span> <span class="n">line_receiver</span><span class="p">()</span>
<a id="__codelineno-21-21" name="__codelineno-21-21"></a>    <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-21-22" name="__codelineno-21-22"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-21-23" name="__codelineno-21-23"></a>        <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="n">line</span><span class="o">:=</span><span class="n">r</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
<a id="__codelineno-21-24" name="__codelineno-21-24"></a>            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ch</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="mi">8192</span><span class="p">)</span>
</code></pre></div>
<h2 id="object-serializations">object serializations</h2>
<p>Sometimes it’s necessary to serialize the representation of an object so it can be transmitted over the network, saved to a file, or stored in a database. One way to do this is to convert data into a standard encoding such as JSON or XML. There is also a common Python-specific data serialization format called Pickle.</p>
<p>The pickle module serializes an object into a stream of bytes that can be used to reconstruct the object at a later point in time. The interface to pickle is simple, consisting of two operations, dump() and load(). For example, the following code writes an object to a file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kn">import</span> <span class="nn">pickle</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="n">obj</span> <span class="o">=</span> <span class="n">SomeObject</span><span class="p">()</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a>   <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>      <span class="c1"># Save object on f</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="n">To</span> <span class="n">restore</span> <span class="n">the</span> <span class="nb">object</span><span class="p">,</span> <span class="n">use</span><span class="p">:</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="n">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="n">view</span> <span class="n">code</span> <span class="n">image</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a>    <span class="n">obj</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>   <span class="c1"># Restore the object</span>
</code></pre></div>
<p>It is not normally necessary for user-defined objects to do anything extra to work with pickle. However, certain kinds of objects can’t be pickled. These tend to be objects that incorporate runtime state—open files, threads, closures, generators, and so on. To handle these tricky cases, a class can define the special methods <strong>getstate</strong>() and <strong>setstate</strong>().</p>
<p>The <strong>getstate</strong>() method, if defined, will be called to create a value representing the state of an object. The value returned by <strong>getstate</strong>() is typically a string, tuple, list, or dictionary. The <strong>setstate</strong>() method receives this value during unpickling and should restore the state of an object from it.</p>
<p>do not unpickle unknow data</p>
<h2 id="blocking-operations-and-concurency">blocking operations and concurency</h2>
<p>A fundamental aspect of I/O is the concept of blocking. By its very nature, I/O is connected to the real world. It often involves waiting for input or devices to be ready. For example, code that reads data on the network might perform a receive operation on a socket like this:</p>
<p>data = sock.recv(8192)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">def</span> <span class="nf">reader1</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>    <span class="k">while</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">8192</span><span class="p">)):</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reader1 got:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="k">def</span> <span class="nf">reader2</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a>    <span class="k">while</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">8192</span><span class="p">)):</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reader2 got:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="c1"># Problem: How to make reader1() and reader2()</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="c1"># run at the same time?</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="n">The</span> <span class="n">rest</span> <span class="n">of</span> <span class="n">this</span> <span class="n">section</span> <span class="n">outlines</span> <span class="n">a</span> <span class="n">few</span> <span class="n">different</span> <span class="n">approaches</span> <span class="n">to</span> <span class="n">solving</span> <span class="n">this</span> <span class="n">problem</span><span class="o">.</span> <span class="n">However</span><span class="p">,</span> <span class="n">it</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">meant</span> <span class="n">to</span> <span class="n">be</span> <span class="n">a</span> <span class="n">full</span> <span class="n">tutorial</span> <span class="n">on</span> <span class="n">concurrency</span><span class="o">.</span> <span class="n">For</span> <span class="n">that</span><span class="p">,</span> <span class="n">you</span> <span class="n">will</span> <span class="n">need</span> <span class="n">to</span> <span class="n">consult</span> <span class="n">other</span> <span class="n">resources</span><span class="o">.</span>
</code></pre></div>
<h2 id="nonblocking-io">nonblocking io</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">sock1</span><span class="p">,</span> <span class="n">sock2</span><span class="p">):</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a>    <span class="n">sock1</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a>    <span class="n">sock2</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a>        <span class="n">reader1</span><span class="p">(</span><span class="n">sock1</span><span class="p">)</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a>        <span class="n">reader2</span><span class="p">(</span><span class="n">sock2</span><span class="p">)</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="n">In</span> <span class="n">practice</span><span class="p">,</span> <span class="n">relying</span> <span class="n">only</span> <span class="n">on</span> <span class="n">nonblocking</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="ow">is</span> <span class="n">clumsy</span> <span class="ow">and</span> <span class="n">inefficient</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">the</span> <span class="n">core</span> <span class="n">of</span> <span class="n">this</span> <span class="n">program</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">run</span><span class="p">()</span> <span class="n">function</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span><span class="o">.</span> <span class="n">It</span> <span class="n">will</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">inefficient</span> <span class="n">busy</span> <span class="n">loop</span> <span class="k">as</span> <span class="n">it</span> <span class="n">constantly</span> <span class="n">tries</span> <span class="n">to</span> <span class="n">read</span> <span class="n">on</span> <span class="n">the</span> <span class="n">sockets</span><span class="o">.</span> <span class="n">This</span> <span class="n">works</span><span class="p">,</span> <span class="n">but</span> <span class="n">it</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">good</span> <span class="n">design</span><span class="o">.</span>
</code></pre></div>
<h2 id="io-polling">IO polling</h2>
<p>Instead of relying upon exceptions and spinning, it is possible to poll I/O channels to see if data is available. The select or selectors module can be used for this purpose. For example, here’s a slightly modified version of the run() function:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="kn">from</span> <span class="nn">selectors</span> <span class="kn">import</span> <span class="n">DefaultSelector</span><span class="p">,</span> <span class="n">EVENT_READ</span><span class="p">,</span> <span class="n">EVENT_WRITE</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">sock1</span><span class="p">,</span> <span class="n">sock2</span><span class="p">):</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a>    <span class="n">selector</span> <span class="o">=</span> <span class="n">DefaultSelector</span><span class="p">()</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a>    <span class="n">selector</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">sock1</span><span class="p">,</span> <span class="n">EVENT_READ</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">reader1</span><span class="p">)</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a>    <span class="n">selector</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">sock2</span><span class="p">,</span> <span class="n">EVENT_READ</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">reader2</span><span class="p">)</span>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a>    <span class="c1"># Wait for something to happen</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">evt</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">():</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a>            <span class="n">func</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">data</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a>            <span class="n">func</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">fileobj</span><span class="p">)</span>
</code></pre></div>
In this code, the loop dispatches either reader1() or reader2() function as a callback whenever I/O is detected on the appropriate socket. The selector.select() operation itself blocks, waiting for I/O to occur. Thus, unlike the previous example, it won’t make the CPU furiously spin.</p>
<p>This approach to I/O is the foundation of many so-called “async” frameworks such as asyncio, although you usually don’t see the inner workings of the event loop.</p>
<h2 id="threading">threading</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kn">import</span> <span class="nn">threading</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="k">def</span> <span class="nf">reader1</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a>    <span class="k">while</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">8192</span><span class="p">)):</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reader1 got:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="k">def</span> <span class="nf">reader2</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a>    <span class="k">while</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">8192</span><span class="p">)):</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reader2 got:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">reader1</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">sock1</span><span class="p">])</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">reader2</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">sock2</span><span class="p">])</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="c1"># Start the threads</span>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-26-17" name="__codelineno-26-17"></a>
<a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="c1"># Wait for the threads to finish</span>
<a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>
<h2 id="asyncio">asyncio</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="kn">import</span> <span class="nn">asyncio</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">reader1</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a>    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a>    <span class="k">while</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">sock_recv</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="mi">8192</span><span class="p">)):</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reader1 got:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">reader2</span><span class="p">(</span><span class="n">sock</span><span class="p">):</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a>    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a>    <span class="k">while</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">sock_recv</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="mi">8192</span><span class="p">)):</span>
<a id="__codelineno-27-11" name="__codelineno-27-11"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reader2 got:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">sock1</span><span class="p">,</span> <span class="n">sock2</span><span class="p">):</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a>    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a>    <span class="n">t1</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">reader1</span><span class="p">(</span><span class="n">sock1</span><span class="p">))</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a>    <span class="n">t2</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">reader2</span><span class="p">(</span><span class="n">sock2</span><span class="p">))</span>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a>    <span class="c1"># Wait for the tasks to finish</span>
<a id="__codelineno-27-19" name="__codelineno-27-19"></a>    <span class="k">await</span> <span class="n">t1</span>
<a id="__codelineno-27-20" name="__codelineno-27-20"></a>    <span class="k">await</span> <span class="n">t2</span>
<a id="__codelineno-27-21" name="__codelineno-27-21"></a>
<a id="__codelineno-27-22" name="__codelineno-27-22"></a><span class="o">...</span>
<a id="__codelineno-27-23" name="__codelineno-27-23"></a><span class="c1"># Run it</span>
<a id="__codelineno-27-24" name="__codelineno-27-24"></a><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">sock1</span><span class="p">,</span> <span class="n">sock2</span><span class="p">))</span>
</code></pre></div>
<h2 id="asyncio-tcp-socket">asyncio tcp socket</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kn">import</span> <span class="nn">asyncio</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">echo_server</span><span class="p">(</span><span class="n">address</span><span class="p">):</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a>    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">)</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Server listening at&#39;</span><span class="p">,</span> <span class="n">address</span><span class="p">)</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a>    <span class="k">with</span> <span class="n">sock</span><span class="p">:</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a>            <span class="n">client</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">sock_accept</span><span class="p">(</span><span class="n">sock</span><span class="p">)</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection from&#39;</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a>            <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">echo_client</span><span class="p">(</span><span class="n">loop</span><span class="p">,</span> <span class="n">client</span><span class="p">))</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">echo_client</span><span class="p">(</span><span class="n">loop</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a>    <span class="k">with</span> <span class="n">client</span><span class="p">:</span>
<a id="__codelineno-28-20" name="__codelineno-28-20"></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-28-21" name="__codelineno-28-21"></a>            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">sock_recv</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<a id="__codelineno-28-22" name="__codelineno-28-22"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-28-23" name="__codelineno-28-23"></a>                <span class="k">break</span>
<a id="__codelineno-28-24" name="__codelineno-28-24"></a>            <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">sock_sendall</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;Got:&#39;</span> <span class="o">+</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-28-25" name="__codelineno-28-25"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection closed&#39;</span><span class="p">)</span>
<a id="__codelineno-28-26" name="__codelineno-28-26"></a>
<a id="__codelineno-28-27" name="__codelineno-28-27"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<a id="__codelineno-28-28" name="__codelineno-28-28"></a>    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<a id="__codelineno-28-29" name="__codelineno-28-29"></a>    <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">echo_server</span><span class="p">(</span><span class="n">loop</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">)))</span>
<a id="__codelineno-28-30" name="__codelineno-28-30"></a>    <span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
</code></pre></div>
<p>To test this code, use a program such as nc or telnet to connect to port 25000 on your machine. The code should echo back the text that you type. If you connect more than once using multiple terminal windows, you’ll find that the code can handle all of the connections concurrently.</p>
<p>Most applications using asyncio will probably operate at a higher level than sockets. However, in such applications, you will still have to make use of special async functions and interact with the underlying event loop in some manner.</p>
<h2 id="binascii">binascii</h2>
<p>converts binary data into text repr</p>
<p>binascii.b2a_hex(b'hello')
b'68656c6c6f'</p>
<blockquote>
<blockquote>
<blockquote>
<p>binascii.a2b_hex(<em>)
b'hello'
binascii.b2a_base64(b'hello')
b'aGVsbG8=\n'
binascii.a2b_base64(</em>)</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="cgi-module">cgi module</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a>&lt;form method=&#39;POST&#39; action=&#39;cgi-bin/register.py&#39;&gt;
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>   &lt;p&gt;
<a id="__codelineno-29-3" name="__codelineno-29-3"></a>   To register, please provide a contact name and email address.
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>   &lt;/p&gt;
<a id="__codelineno-29-5" name="__codelineno-29-5"></a>   &lt;div&gt;
<a id="__codelineno-29-6" name="__codelineno-29-6"></a>      &lt;input name=&#39;name&#39; type=&#39;text&#39;&gt;Your name:&lt;/input&gt;
<a id="__codelineno-29-7" name="__codelineno-29-7"></a>   &lt;/div&gt;
<a id="__codelineno-29-8" name="__codelineno-29-8"></a>   &lt;div&gt;
<a id="__codelineno-29-9" name="__codelineno-29-9"></a>      &lt;input name=&#39;email&#39; type=&#39;email&#39;&gt;Your email:&lt;/input&gt;
<a id="__codelineno-29-10" name="__codelineno-29-10"></a>   &lt;/div&gt;
<a id="__codelineno-29-11" name="__codelineno-29-11"></a>   &lt;div class=&#39;modal-footer justify-content-center&#39;&gt;
<a id="__codelineno-29-12" name="__codelineno-29-12"></a>      &lt;input type=&#39;submit&#39; name=&#39;submit&#39; value=&#39;Register&#39;&gt;&lt;/input&gt;
<a id="__codelineno-29-13" name="__codelineno-29-13"></a>   &lt;/div&gt;
<a id="__codelineno-29-14" name="__codelineno-29-14"></a>&lt;/form&gt;
<a id="__codelineno-29-15" name="__codelineno-29-15"></a>Here’s a CGI script that receives the form data on the other end:
<a id="__codelineno-29-16" name="__codelineno-29-16"></a>
<a id="__codelineno-29-17" name="__codelineno-29-17"></a>Click here to view code image
<a id="__codelineno-29-18" name="__codelineno-29-18"></a>
<a id="__codelineno-29-19" name="__codelineno-29-19"></a>#!/usr/bin/env python
<a id="__codelineno-29-20" name="__codelineno-29-20"></a>import cgi
<a id="__codelineno-29-21" name="__codelineno-29-21"></a>try:
<a id="__codelineno-29-22" name="__codelineno-29-22"></a>    form = cgi.FieldStorage()
<a id="__codelineno-29-23" name="__codelineno-29-23"></a>    name = form.getvalue(&#39;name&#39;)
<a id="__codelineno-29-24" name="__codelineno-29-24"></a>    email = form.getvalue(&#39;email&#39;)
<a id="__codelineno-29-25" name="__codelineno-29-25"></a>    # Validate the responses and do whatever
<a id="__codelineno-29-26" name="__codelineno-29-26"></a>    ...
<a id="__codelineno-29-27" name="__codelineno-29-27"></a>    # Produce an HTML result (or redirect)
<a id="__codelineno-29-28" name="__codelineno-29-28"></a>    print(&#39;Status: 302 Moved\r&#39;)
<a id="__codelineno-29-29" name="__codelineno-29-29"></a>    print(&#39;Location: https://www.mywebsite.com/thanks.html\r&#39;)
<a id="__codelineno-29-30" name="__codelineno-29-30"></a>    print(&#39;\r&#39;)
<a id="__codelineno-29-31" name="__codelineno-29-31"></a>except Exception as e:
<a id="__codelineno-29-32" name="__codelineno-29-32"></a>    print(&#39;Status: 501 Error\r&#39;)
<a id="__codelineno-29-33" name="__codelineno-29-33"></a>    print(&#39;Content-type: text/plain\r&#39;)
<a id="__codelineno-29-34" name="__codelineno-29-34"></a>    print(&#39;\r&#39;)
<a id="__codelineno-29-35" name="__codelineno-29-35"></a>    print(&#39;Some kind of error occurred.\r&#39;)
<a id="__codelineno-29-36" name="__codelineno-29-36"></a>Will writing such a CGI script get you a job at an Internet startup? Probably not. Will it solve your actual problem? Likely.
</code></pre></div>
<h2 id="configparser">configparser</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a>; A comment
<a id="__codelineno-30-2" name="__codelineno-30-2"></a>[section1]
<a id="__codelineno-30-3" name="__codelineno-30-3"></a>name1 = value1
<a id="__codelineno-30-4" name="__codelineno-30-4"></a>name2 = value2
<a id="__codelineno-30-5" name="__codelineno-30-5"></a>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a>[section2]
<a id="__codelineno-30-7" name="__codelineno-30-7"></a>; Alternative syntax
<a id="__codelineno-30-8" name="__codelineno-30-8"></a>name1: value1
<a id="__codelineno-30-9" name="__codelineno-30-9"></a>name2: value2
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="n">cfg</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="n">cfg</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;conig.ini&#39;</span><span class="p">)</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="c1"># Extract values</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="n">a</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;section1&#39;</span><span class="p">,</span> <span class="s1">&#39;name1&#39;</span><span class="p">)</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="n">b</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;section2&#39;</span><span class="p">,</span> <span class="s1">&#39;name2&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="errorno">errorno</h2>
<p>so much error handlerrs</p>
<h2 id="fcntl-module">fcntl module</h2>
<p>low level io tool</p>
<p>open file with lock to avoid  concurent open</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kn">import</span> <span class="nn">fcntl</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;somefile&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a>     <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a>         <span class="n">fcntl</span><span class="o">.</span><span class="n">flock</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">fcntl</span><span class="o">.</span><span class="n">LOCK_EX</span><span class="p">)</span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a>         <span class="c1"># Use the file</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a>         <span class="o">...</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a>     <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a>         <span class="n">fcntl</span><span class="o">.</span><span class="n">flock</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">fcntl</span><span class="o">.</span><span class="n">LOCK_UN</span><span class="p">)</span>
</code></pre></div>
<h2 id="hashlib">hashlib</h2>
<p>The hashlib module provides functions for computing cryptographic hash values such as MD5 and SHA-1. The following example illustrates how to use the module:</p>
<p>Click here to view code image</p>
<blockquote>
<blockquote>
<blockquote>
<p>h = hashlib.new('sha256')
h.update(b'Hello')    # Feed data
h.update(b'World')
h.digest()
b'\xa5\x91\xa6\xd4\x0b\xf4 @J\x01\x173\xcf\xb7\xb1\x90\xd6,e\xbf\x0b\xcd\xa3+W\xb2w\xd9\xad\x9f\x14n
h.hexdigest()
'a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e'
h.digest_size
32
</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="https-package">https package</h2>
<h2 id="io_1">io</h2>
<p>The io module primarily contains the definitions of classes used to implement the file objects as returned by the open() function. It is not so common to access those classes directly. However, the module also contains a pair of classes that are useful for “faking” a file in the form of strings and bytes. This can be useful for testing and other applications where you need to provide a “file” but have obtained data in a different way.</p>
<p>The StringIO() class provides a file-like interface on top of strings. For example, here is how you can write output to a string:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kn">import</span> <span class="nn">io</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="n">file</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="n">greeting</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="c1"># Get the resulting output</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="n">output</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</code></pre></div>
<h2 id="logging">logging</h2>
<p>The logging module is the de facto standard module used for reporting program diagnostics and for print-style debugging. It can be used to route output to a log file and provides a large number of configuration options. A common practice is to write code that creates a Logger instance and issues messages on it like this:</p>
<p>Click here to view code image
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="c1"># Function that uses logging</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a>    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;A debugging message&#39;</span><span class="p">)</span>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a>    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;An informational message&#39;</span><span class="p">)</span>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a>    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;A warning message&#39;</span><span class="p">)</span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a>    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;An error message&#39;</span><span class="p">)</span>
<a id="__codelineno-34-10" name="__codelineno-34-10"></a>    <span class="n">log</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;A critical message&#39;</span><span class="p">)</span>
<a id="__codelineno-34-11" name="__codelineno-34-11"></a>
<a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="c1"># Configuration of logging (occurs one at program startup)</span>
<a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<a id="__codelineno-34-14" name="__codelineno-34-14"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<a id="__codelineno-34-15" name="__codelineno-34-15"></a>         <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
<a id="__codelineno-34-16" name="__codelineno-34-16"></a>         <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;output.log&#39;</span>
<a id="__codelineno-34-17" name="__codelineno-34-17"></a>    <span class="p">)</span>
</code></pre></div>
There are five built-in levels of logging ordered by increasing severity. When configuring the logging system, you specify a level that acts as a filter. Only messages at that level or greater severity are reported. Logging provides a large number of configuration options, mostly related to the back-end handling of the log messages. Usually you don’t need to know about that when writing application code—you use debug(), info(), warning(), and similar methods on some given Logger instance. Any special configuration takes place during program startup in a special location (such as a main() function or the main code block).</p>
<h2 id="pathlib">pathlib</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="n">filename</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;/Users/beazley/old/data.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="n">Once</span> <span class="n">you</span> <span class="n">have</span> <span class="n">an</span> <span class="n">instance</span> <span class="n">filename</span> <span class="n">of</span> <span class="n">Path</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">perform</span> <span class="n">various</span> <span class="n">operations</span> <span class="n">on</span> <span class="n">it</span> <span class="n">to</span> <span class="n">manipulate</span> <span class="n">the</span> <span class="n">filename</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">:</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="n">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="n">view</span> <span class="n">code</span> <span class="n">image</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">filename</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="s1">&#39;data.csv&#39;</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">filename</span><span class="o">.</span><span class="n">parent</span>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;/Users/beazley/old&#39;</span><span class="p">)</span>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">filename</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s1">&#39;newfile.csv&#39;</span>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;/Users/beazley/old/newfile.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">filename</span><span class="o">.</span><span class="n">parts</span>
<a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="s1">&#39;beazley&#39;</span><span class="p">,</span> <span class="s1">&#39;old&#39;</span><span class="p">,</span> <span class="s1">&#39;data.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">filename</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;.csv.clean&#39;</span><span class="p">)</span>
<a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;/Users/beazley/old/data.csv.clean&#39;</span><span class="p">)</span>
<a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="o">&gt;&gt;&gt;</span>
<a id="__codelineno-35-19" name="__codelineno-35-19"></a>
<a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="kn">import</span> <span class="nn">pathlib</span>
<a id="__codelineno-35-21" name="__codelineno-35-21"></a>
<a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="k">def</span> <span class="nf">compute_usage</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<a id="__codelineno-35-23" name="__codelineno-35-23"></a>    <span class="n">pathname</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<a id="__codelineno-35-24" name="__codelineno-35-24"></a>    <span class="k">if</span> <span class="n">pathname</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
<a id="__codelineno-35-25" name="__codelineno-35-25"></a>        <span class="k">return</span> <span class="n">pathname</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
<a id="__codelineno-35-26" name="__codelineno-35-26"></a>    <span class="k">elif</span> <span class="n">pathname</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
<a id="__codelineno-35-27" name="__codelineno-35-27"></a>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
<a id="__codelineno-35-28" name="__codelineno-35-28"></a>                   <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">pathname</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
<a id="__codelineno-35-29" name="__codelineno-35-29"></a>                   <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">())</span>
<a id="__codelineno-35-30" name="__codelineno-35-30"></a>        <span class="k">return</span> <span class="n">pathname</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
<a id="__codelineno-35-31" name="__codelineno-35-31"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-35-32" name="__codelineno-35-32"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Unsupported file kind&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="re">re</h2>
<p>regex</p>
<h2 id="shutil">shutil</h2>
<p>some shell commadns</p>
<p>import shutil</p>
<p>shutil.copy(srcfile, dstfile)
To move a file:</p>
<p>Click here to view code image</p>
<p>shutil.move(srcfile, dstfile)
To copy a directory tree:</p>
<p>Click here to view code image</p>
<p>shutil.copytree(srcdir, dstdir)
To remove a directory tree:</p>
<p>shutil.rmtree(pathname)
The shutil module is often used as a safer and more portable alternative to directly executing shell commands with the os.system() function.</p>
<h2 id="select">select</h2>
<p>The select module is used for simple polling of multiple I/O streams. That is, it can be used to watch a collection of file descriptors for incoming data or for the ability to receive outgoing data. The following example shows typical usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kn">import</span> <span class="nn">select</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="c1"># Collections of objects representing file descriptors.  Must be</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="c1"># integers or objects with a fileno() method.</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="n">want_to_read</span> <span class="o">=</span> <span class="p">[</span> <span class="o">...</span> <span class="p">]</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="n">want_to_write</span> <span class="o">=</span> <span class="p">[</span> <span class="o">...</span> <span class="p">]</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="n">check_exceptions</span> <span class="o">=</span> <span class="p">[</span> <span class="o">...</span> <span class="p">]</span>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="c1"># Timeout (or None)</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="n">timeout</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="c1"># Poll for I/O</span>
<a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="n">can_read</span><span class="p">,</span> <span class="n">can_write</span><span class="p">,</span> <span class="n">have_exceptions</span> <span class="o">=</span> \
<a id="__codelineno-36-14" name="__codelineno-36-14"></a>    <span class="n">select</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">want_to_read</span><span class="p">,</span> <span class="n">want_to_write</span><span class="p">,</span> <span class="n">check_exceptions</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
<a id="__codelineno-36-15" name="__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="c1"># Perform I/O operations</span>
<a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">can_read</span><span class="p">:</span>
<a id="__codelineno-36-18" name="__codelineno-36-18"></a>    <span class="n">do_read</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-36-19" name="__codelineno-36-19"></a><span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">can_write</span><span class="p">:</span>
<a id="__codelineno-36-20" name="__codelineno-36-20"></a>    <span class="n">do_write</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-36-21" name="__codelineno-36-21"></a>
<a id="__codelineno-36-22" name="__codelineno-36-22"></a><span class="c1"># Handle exceptions</span>
<a id="__codelineno-36-23" name="__codelineno-36-23"></a><span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">have_exceptions</span><span class="p">:</span>
<a id="__codelineno-36-24" name="__codelineno-36-24"></a>    <span class="n">handle_exception</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</code></pre></div>
<h2 id="smtlib">smtlib</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kn">import</span> <span class="nn">smtplib</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="n">fromaddr</span> <span class="o">=</span> <span class="s1">&#39;someone@some.com&#39;</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="n">toaddrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;recipient@other.com&#39;</span> <span class="p">]</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="n">amount</span> <span class="o">=</span> <span class="mf">123.45</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;From: </span><span class="si">{</span><span class="n">fromaddr</span><span class="si">}</span><span class="se">\r</span><span class="s1"></span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="se">\r</span><span class="s1"></span>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="s1">Pay </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s1"> bitcoin or else.  We&#39;re watching.</span><span class="se">\r</span><span class="s1"></span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-37-10" name="__codelineno-37-10"></a>
<a id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="n">server</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">)</span>
<a id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="n">serv</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">fromaddr</span><span class="p">,</span> <span class="n">toaddrs</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="n">serv</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div>
<h2 id="socket">socket</h2>
<p>use telnet or nc
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="n">socket</span><span class="p">,</span> <span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">)</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;python.org&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">))</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="n">sock</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;GET /index.html HTTP/1.0</span><span class="se">\r\n\r\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a>    <span class="n">part</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">part</span><span class="p">:</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a>        <span class="k">break</span>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a>    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="n">response</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
<a id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="struct">struct</h2>
<p>The struct module is used to convert data between Python and binary data structures, represented as Python byte strings. These data structures are often used when interacting with functions written in C, binary file formats, network protocols, or binary communication over serial ports.</p>
<p>As an example, suppose you need to construct a binary message with its format described by a C data structure:</p>
<p>Click here to view code image</p>
<h1 id="message-format-all-values-are-big-endian">Message format: All values are 'big endian'</h1>
<p>struct Message {
    unsigned short msgid;      // 16 bit unsigned integer
    unsigned int sequence;     // 32 bit sequence number
    float x;                   // 32 bit float
    float y;                   // 32 bit float
}</p>
<h2 id="subprocess">subprocess</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kn">import</span> <span class="nn">subprocess</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="c1"># Run the &#39;netstat -a&#39; command and collect its output</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a>    <span class="n">out</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span><span class="s1">&#39;netstat&#39;</span><span class="p">,</span> <span class="s1">&#39;-a&#39;</span><span class="p">])</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It failed:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="n">The</span> <span class="n">data</span> <span class="n">returned</span> <span class="n">by</span> <span class="n">check_output</span><span class="p">()</span> <span class="ow">is</span> <span class="n">presented</span> <span class="k">as</span> <span class="nb">bytes</span><span class="o">.</span> <span class="n">If</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">convert</span> <span class="n">it</span> <span class="n">to</span> <span class="n">text</span><span class="p">,</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">you</span> <span class="n">apply</span> <span class="n">a</span> <span class="n">proper</span> <span class="n">decoding</span><span class="p">:</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="n">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="n">view</span> <span class="n">code</span> <span class="n">image</span>
<a id="__codelineno-39-11" name="__codelineno-39-11"></a>
<a id="__codelineno-39-12" name="__codelineno-39-12"></a><span class="n">text</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<a id="__codelineno-39-13" name="__codelineno-39-13"></a><span class="n">It</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">possible</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">up</span> <span class="n">a</span> <span class="n">pipe</span> <span class="ow">and</span> <span class="n">to</span> <span class="n">interact</span> <span class="k">with</span> <span class="n">a</span> <span class="n">subprocess</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">more</span> <span class="n">detailed</span> <span class="n">manner</span><span class="o">.</span> <span class="n">To</span> <span class="n">do</span> <span class="n">that</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">Popen</span> <span class="k">class</span> <span class="nc">like</span> <span class="n">this</span><span class="p">:</span>
<a id="__codelineno-39-14" name="__codelineno-39-14"></a>
<a id="__codelineno-39-15" name="__codelineno-39-15"></a><span class="n">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="n">view</span> <span class="n">code</span> <span class="n">image</span>
<a id="__codelineno-39-16" name="__codelineno-39-16"></a>
<a id="__codelineno-39-17" name="__codelineno-39-17"></a><span class="kn">import</span> <span class="nn">subprocess</span>
<a id="__codelineno-39-18" name="__codelineno-39-18"></a>
<a id="__codelineno-39-19" name="__codelineno-39-19"></a><span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s1">&#39;wc&#39;</span><span class="p">],</span>
<a id="__codelineno-39-20" name="__codelineno-39-20"></a>                     <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
<a id="__codelineno-39-21" name="__codelineno-39-21"></a>                     <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
<a id="__codelineno-39-22" name="__codelineno-39-22"></a>
<a id="__codelineno-39-23" name="__codelineno-39-23"></a><span class="c1"># Send data to the subprocess</span>
<a id="__codelineno-39-24" name="__codelineno-39-24"></a><span class="n">p</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;hello world</span><span class="se">\n</span><span class="s1">this is a test</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-39-25" name="__codelineno-39-25"></a><span class="n">p</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-39-26" name="__codelineno-39-26"></a>
<a id="__codelineno-39-27" name="__codelineno-39-27"></a><span class="c1"># Read data back</span>
<a id="__codelineno-39-28" name="__codelineno-39-28"></a><span class="n">out</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a id="__codelineno-39-29" name="__codelineno-39-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</code></pre></div>
<h2 id="tmpfile">tmpfile</h2>
<p>temp files</p>
<h2 id="textwrap">textwrap</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="n">wrapped</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">81</span><span class="p">)</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">wrapped</span><span class="p">))</span>
</code></pre></div>
<h2 id="threading_1">threading</h2>
<p>threads</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kn">import</span> <span class="nn">threading</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="kn">import</span> <span class="nn">time</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a>    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;T-minus&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a>        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countdown</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
<a id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>      <span class="c1"># Wait for the thread to finish</span>
<a id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="n">If</span> <span class="n">you</span><span class="err">’</span><span class="n">re</span> <span class="n">never</span> <span class="n">going</span> <span class="n">to</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">the</span> <span class="n">thread</span> <span class="n">to</span> <span class="n">finish</span><span class="p">,</span> <span class="n">make</span> <span class="n">it</span> <span class="n">daemonic</span> <span class="n">by</span> <span class="n">supplying</span> <span class="n">an</span> <span class="n">extra</span> <span class="n">daemon</span> <span class="n">flag</span> <span class="n">like</span> <span class="n">this</span><span class="p">:</span>
<a id="__codelineno-41-14" name="__codelineno-41-14"></a>
<a id="__codelineno-41-15" name="__codelineno-41-15"></a><span class="n">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="n">view</span> <span class="n">code</span> <span class="n">image</span>
<a id="__codelineno-41-16" name="__codelineno-41-16"></a>
<a id="__codelineno-41-17" name="__codelineno-41-17"></a><span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countdown</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-41-18" name="__codelineno-41-18"></a><span class="c1">## to stop</span>
<a id="__codelineno-41-19" name="__codelineno-41-19"></a><span class="kn">import</span> <span class="nn">threading</span>
<a id="__codelineno-41-20" name="__codelineno-41-20"></a><span class="kn">import</span> <span class="nn">time</span>
<a id="__codelineno-41-21" name="__codelineno-41-21"></a>
<a id="__codelineno-41-22" name="__codelineno-41-22"></a><span class="n">must_stop</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-41-23" name="__codelineno-41-23"></a>
<a id="__codelineno-41-24" name="__codelineno-41-24"></a><span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<a id="__codelineno-41-25" name="__codelineno-41-25"></a>    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">must_stop</span><span class="p">:</span>
<a id="__codelineno-41-26" name="__codelineno-41-26"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;T-minus&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<a id="__codelineno-41-27" name="__codelineno-41-27"></a>        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
<a id="__codelineno-41-28" name="__codelineno-41-28"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h2 id="thread-lock">thread lock</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="kn">import</span> <span class="nn">threading</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="k">class</span> <span class="nc">Counter</span><span class="p">:</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
<a id="__codelineno-42-7" name="__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8"></a>    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-42-9" name="__codelineno-42-9"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a>             <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-42-11" name="__codelineno-42-11"></a>
<a id="__codelineno-42-12" name="__codelineno-42-12"></a>    <span class="k">def</span> <span class="nf">decrement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-42-13" name="__codelineno-42-13"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
<a id="__codelineno-42-14" name="__codelineno-42-14"></a>             <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">-=</span> <span class="mi">1</span>
</code></pre></div>
<h2 id="threading-event">threading event</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="k">def</span> <span class="nf">step1</span><span class="p">(</span><span class="n">evt</span><span class="p">):</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Step 1&#39;</span><span class="p">)</span>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a>    <span class="n">evt</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
<a id="__codelineno-43-5" name="__codelineno-43-5"></a>
<a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="k">def</span> <span class="nf">step2</span><span class="p">(</span><span class="n">evt</span><span class="p">):</span>
<a id="__codelineno-43-7" name="__codelineno-43-7"></a>    <span class="n">evt</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
<a id="__codelineno-43-8" name="__codelineno-43-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Step 2&#39;</span><span class="p">)</span>
<a id="__codelineno-43-9" name="__codelineno-43-9"></a>
<a id="__codelineno-43-10" name="__codelineno-43-10"></a><span class="n">evt</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
<a id="__codelineno-43-11" name="__codelineno-43-11"></a><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">step1</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">evt</span><span class="p">])</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-43-12" name="__codelineno-43-12"></a><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">step2</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">evt</span><span class="p">])</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
<h2 id="thread-queue">thread queue</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="kn">import</span> <span class="nn">threading</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="kn">import</span> <span class="nn">queue</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="kn">import</span> <span class="nn">time</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="k">def</span> <span class="nf">producer</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Producing:&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<a id="__codelineno-44-8" name="__codelineno-44-8"></a>        <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done&#39;</span><span class="p">)</span>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a>    <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a><span class="k">def</span> <span class="nf">consumer</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
<a id="__codelineno-44-13" name="__codelineno-44-13"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-44-14" name="__codelineno-44-14"></a>        <span class="n">item</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<a id="__codelineno-44-15" name="__codelineno-44-15"></a>        <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-44-16" name="__codelineno-44-16"></a>            <span class="k">break</span>
<a id="__codelineno-44-17" name="__codelineno-44-17"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consuming:&#39;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
<a id="__codelineno-44-18" name="__codelineno-44-18"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Goodbye&#39;</span><span class="p">)</span>
<a id="__codelineno-44-19" name="__codelineno-44-19"></a>
<a id="__codelineno-44-20" name="__codelineno-44-20"></a><span class="n">q</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>
<a id="__codelineno-44-21" name="__codelineno-44-21"></a><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producer</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">q</span><span class="p">])</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-44-22" name="__codelineno-44-22"></a><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">q</span><span class="p">])</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
<h2 id="time">time</h2>
<p>The time module is used to access system time-related functions. The following selected functions are the most useful:</p>
<p>sleep(seconds)
Make Python sleep for a given number of seconds, given as a floating point.</p>
<p>time()
Return the current system time in UTC as a floating-point number. This is the number of seconds since the epoch (usually January 1, 1970 for UNIX systems). Use localtime() to convert it into a data structure suitable for extracting useful information.</p>
<p>localtime([secs])
Return a struct_time object representing the local time on the system or the time represented by the floating-point value secs passed as an argument. The resulting struct has attributes tm_year, tm_mon, tm_mday, tm_hour, tm_min, tm_sec, tm_wday, tm_yday, and tm_isdst.</p>
<p>gmtime([secs])
The same as localtime() except that the resulting structure represents the time in UTC (or Greenwich Mean Time).</p>
<p>ctime([secs])
Convert a time represented as seconds to a text string suitable for printing. Useful for debugging and logging.</p>
<p>asctime(tm)
Convert a time structure as represented by localtime() into a text string suitable for printing.</p>
<p>The datetime module is more generally used for representing dates and times for the purpose of performing date-related computations and dealing with timezones.</p>
<h2 id="urllib">urllib</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="s1">&#39;http://www.python.org&#39;</span><span class="p">)</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="o">&gt;&gt;&gt;</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="n">If</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">encode</span> <span class="n">form</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlencode</span><span class="p">()</span> <span class="k">as</span> <span class="n">shown</span> <span class="n">here</span><span class="p">:</span>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a>
<a id="__codelineno-45-7" name="__codelineno-45-7"></a><span class="n">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="n">view</span> <span class="n">code</span> <span class="n">image</span>
<a id="__codelineno-45-8" name="__codelineno-45-8"></a>
<a id="__codelineno-45-9" name="__codelineno-45-9"></a><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<a id="__codelineno-45-10" name="__codelineno-45-10"></a><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>
<a id="__codelineno-45-11" name="__codelineno-45-11"></a>
<a id="__codelineno-45-12" name="__codelineno-45-12"></a><span class="n">form</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-45-13" name="__codelineno-45-13"></a>   <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Mary A. Python&#39;</span><span class="p">,</span>
<a id="__codelineno-45-14" name="__codelineno-45-14"></a>   <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;mary123@python.org&#39;</span>
<a id="__codelineno-45-15" name="__codelineno-45-15"></a><span class="p">}</span>
<a id="__codelineno-45-16" name="__codelineno-45-16"></a>
<a id="__codelineno-45-17" name="__codelineno-45-17"></a><span class="n">data</span> <span class="o">=</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
<a id="__codelineno-45-18" name="__codelineno-45-18"></a><span class="n">u</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/post&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
<a id="__codelineno-45-19" name="__codelineno-45-19"></a><span class="n">response</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a id="__codelineno-45-20" name="__codelineno-45-20"></a><span class="n">The</span> <span class="n">urlopen</span><span class="p">()</span> <span class="n">function</span> <span class="n">works</span> <span class="n">fine</span> <span class="k">for</span> <span class="n">basic</span> <span class="n">webpages</span> <span class="ow">and</span> <span class="n">APIs</span> <span class="n">involving</span> <span class="n">HTTP</span> <span class="ow">or</span> <span class="n">HTTPS</span><span class="o">.</span> <span class="n">However</span><span class="p">,</span> <span class="n">it</span> <span class="n">becomes</span> <span class="n">quite</span> <span class="n">awkward</span> <span class="n">to</span> <span class="n">use</span> <span class="k">if</span> <span class="n">access</span> <span class="n">also</span> <span class="n">involves</span> <span class="n">cookies</span><span class="p">,</span> <span class="n">advanced</span> <span class="n">authentication</span> <span class="n">schemes</span><span class="p">,</span> <span class="ow">and</span> <span class="n">other</span> <span class="n">layers</span><span class="o">.</span> <span class="n">Frankly</span><span class="p">,</span> <span class="n">most</span> <span class="n">Python</span> <span class="n">programmers</span> <span class="n">would</span> <span class="n">use</span> <span class="n">a</span> <span class="n">third</span><span class="o">-</span><span class="n">party</span> <span class="n">library</span> <span class="n">such</span> <span class="k">as</span> <span class="n">requests</span> <span class="ow">or</span> <span class="n">httpx</span> <span class="n">to</span> <span class="n">handle</span> <span class="n">these</span> <span class="n">situations</span><span class="o">.</span> <span class="n">You</span> <span class="n">should</span> <span class="n">too</span><span class="o">.</span>
<a id="__codelineno-45-21" name="__codelineno-45-21"></a>
<a id="__codelineno-45-22" name="__codelineno-45-22"></a><span class="n">The</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span> <span class="n">subpackage</span> <span class="n">has</span> <span class="n">additional</span> <span class="n">functions</span> <span class="k">for</span> <span class="n">manipulating</span> <span class="n">URLs</span> <span class="n">themselves</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">the</span> <span class="n">urlparse</span><span class="p">()</span> <span class="n">function</span> <span class="n">can</span> <span class="n">be</span> <span class="n">used</span> <span class="n">to</span> <span class="n">pull</span> <span class="n">apart</span> <span class="n">a</span> <span class="n">URL</span><span class="p">:</span>
<a id="__codelineno-45-23" name="__codelineno-45-23"></a>
<a id="__codelineno-45-24" name="__codelineno-45-24"></a><span class="n">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="n">view</span> <span class="n">code</span> <span class="n">image</span>
<a id="__codelineno-45-25" name="__codelineno-45-25"></a>
<a id="__codelineno-45-26" name="__codelineno-45-26"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/get?name=Dave&amp;n=42&#39;</span>
<a id="__codelineno-45-27" name="__codelineno-45-27"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>
<a id="__codelineno-45-28" name="__codelineno-45-28"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-45-29" name="__codelineno-45-29"></a><span class="n">ParseResult</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s1">&#39;httpbin.org&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/get&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<a id="__codelineno-45-30" name="__codelineno-45-30"></a><span class="n">query</span><span class="o">=</span><span class="s1">&#39;name=Dave&amp;n=42&#39;</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-45-31" name="__codelineno-45-31"></a><span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<h2 id="unicodedata">unicodedata</h2>
<p>for unicode strings</p>
<p>unicodedata.normalize(option)</p>
<h2 id="xml">xml</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="kn">from</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">import</span> <span class="n">ElementTree</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="n">doc</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;recipe.xml&#39;</span><span class="p">)</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="n">title</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="c1"># Alternative (just get element text)</span>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">findtext</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">))</span>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a><span class="c1"># Iterate over multiple elements</span>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;ingredients/item&#39;</span><span class="p">):</span>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a>    <span class="n">num</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;num&#39;</span><span class="p">)</span>
<a id="__codelineno-46-13" name="__codelineno-46-13"></a>    <span class="n">units</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-46-14" name="__codelineno-46-14"></a>    <span class="n">text</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-46-15" name="__codelineno-46-15"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
<p>I/O is a fundamental part of writing any useful program. Given its popularity, Python is able to work with literally any data format, encoding, or document structure that’s in use. Although the standard library might not support it, you will almost certainly find a third-party module to solve your problem.</p>
<p>In the big picture, it may be more useful to think about the edges of your application. At the outer boundary between your program and reality, it’s common to encounter issues related to data encoding. This is especially true for textual data and Unicode. Much of the complexity in Python’s I/O handling—supporting different encoding, error handling policies, and so on—is aimed at this specific problem. It’s also critical to keep in mind that textual data and binary data are strictly separated. Knowing what you’re working with helps in understanding the big picture.</p>
<p>A secondary consideration in I/O is the overall evaluation model. Python code is currently separated into two worlds—normal synchronous code and asynchronous code usually associated with the asyncio module (characterized by the use of async functions and the async/await syntax). Asynchronous code almost always requires using dedicated libraries that are capable of operating in that environment. This, in turn, forces your hand on writing your application code in the “async” style as well. Honestly, you should probably avoid asynchronous coding unless you absolutely know that you need it—and if you’re not really sure, then you almost certainly don’t. Most of the well-adjusted Python-speaking universe codes in a normal synchronous style that is far easier to reason about, debug, and test. You should choose that.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../classes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: classes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              classes
            </div>
          </div>
        </a>
      
      
        
        <a href="../builtin/" class="md-footer__link md-footer__link--next" aria-label="Next: builtins" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              builtins
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>