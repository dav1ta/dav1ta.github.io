
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>overall - David</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cons" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="David" class="md-header__button md-logo" aria-label="David" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            David
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              overall
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="David" class="md-nav__button md-logo" aria-label="David" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    David
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Books
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Books" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Books
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1" type="checkbox" id="__nav_2_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_1">
          Python Cookbook
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python Cookbook" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Python Cookbook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ipynb/cookbook/" class="md-nav__link">
        Python Cookbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ipynb/cookbook2/" class="md-nav__link">
        Second half
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_2" type="checkbox" id="__nav_2_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_2">
          Python Distilled
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python Distilled" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Python Distilled
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/tips/" class="md-nav__link">
        python structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/tips/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/tips/classes/" class="md-nav__link">
        classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/tips/io/" class="md-nav__link">
        IO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/tips/builtin/" class="md-nav__link">
        builtins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3">
          Fluent Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fluent Python" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Fluent Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/fluent/data-model/" class="md-nav__link">
        data model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/fluent/data-structures/" class="md-nav__link">
        data structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/fluent/dict-set/" class="md-nav__link">
        dict vs set
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/fluent/object-references/" class="md-nav__link">
        object references
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/fluent/record-like-data/" class="md-nav__link">
        records
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/fluent/text-vs-byts/" class="md-nav__link">
        string and bytes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4" type="checkbox" id="__nav_2_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_4">
          Clean Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Clean Code" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          Clean Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/python_clean_code/" class="md-nav__link">
        clean code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/decorators/" class="md-nav__link">
        decorators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/descriptors/" class="md-nav__link">
        descriptors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/iterators/" class="md-nav__link">
        iterators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/design_code/" class="md-nav__link">
        code design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/design_patterns/" class="md-nav__link">
        design patterns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/solid/" class="md-nav__link">
        solid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/test_pytest/" class="md-nav__link">
        pytest
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_5" type="checkbox" id="__nav_2_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_5">
          Clean Code examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Clean Code examples" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          Clean Code examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/code/chap4/" class="md-nav__link">
        chap4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/code/chap5/" class="md-nav__link">
        chap5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/code/chap6/" class="md-nav__link">
        chap6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/code/chap7/" class="md-nav__link">
        chap7
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/code/chap8/" class="md-nav__link">
        chap8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/clean_code/code/chap9/" class="md-nav__link">
        chap9
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Odoo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Odoo" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Odoo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/odoo/models/" class="md-nav__link">
        Odoo Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/odoo/views/" class="md-nav__link">
        Odoo Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/odoo/server_side/" class="md-nav__link">
        server side development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/odoo/debug/" class="md-nav__link">
        Odoo debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/odoo/xml/" class="md-nav__link">
        Odoo xml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/odoo/raw/" class="md-nav__link">
        Advanced Back End
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/odoo/tips/" class="md-nav__link">
        Some Tims
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Perfomance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Perfomance" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Perfomance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/profiling/profile/" class="md-nav__link">
        profiling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../git/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../git/git-branch/" class="md-nav__link">
        Git branch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../git/git-patch/" class="md-nav__link">
        Git patch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../git/git-tools/" class="md-nav__link">
        Git tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../k9s/k9s/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../aws/aws/" class="md-nav__link">
        AWS
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Posgresql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Posgresql" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Posgresql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_types/" class="md-nav__link">
        data types
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          overall
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        overall
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cons" class="md-nav__link">
    CONS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    performance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling" class="md-nav__link">
    scaling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-vs-nosql" class="md-nav__link">
    SQL vs NOSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection" class="md-nav__link">
    connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting" class="md-nav__link">
    Selecting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-remote-access-for-users" class="md-nav__link">
    enable remote access for users
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#psql" class="md-nav__link">
    PSQL
  </a>
  
    <nav class="md-nav" aria-label="PSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting" class="md-nav__link">
    connecting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute-multiple-commands-from-file" class="md-nav__link">
    execute multiple commands from file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meta-commands" class="md-nav__link">
    meta commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-password" class="md-nav__link">
    change password
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-hardcoding-password" class="md-nav__link">
    avoid hardcoding password
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-commands" class="md-nav__link">
    SQL commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    logs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-databases" class="md-nav__link">
    listing databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-database-siz" class="md-nav__link">
    get database siz
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-big-tables" class="md-nav__link">
    select big tables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-row-count" class="md-nav__link">
    get row count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#before-designing-database" class="md-nav__link">
    before designing database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-paraameters-of-running-programs" class="md-nav__link">
    change paraameters of running programs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find-current-configuration-settings" class="md-nav__link">
    find current configuration settings
  </a>
  
    <nav class="md-nav" aria-label="find current configuration settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-non-default-parameters" class="md-nav__link">
    get non default parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reload-configuration-file" class="md-nav__link">
    reload configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diferrent-configuration-for-differen-users" class="md-nav__link">
    diferrent configuration for differen users
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-specification" class="md-nav__link">
    configuration specification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-external-modules-to-postgresql" class="md-nav__link">
    adding external modules to postgresql
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one-connection-per-user" class="md-nav__link">
    one connection per user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-connection-pool" class="md-nav__link">
    create connection pool
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../post/" class="md-nav__link">
        additional
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../psql/" class="md-nav__link">
        psql
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/pre-commit/" class="md-nav__link">
        pre-commit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/aactivator/" class="md-nav__link">
        aactivator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../agile/agile/" class="md-nav__link">
        Agile
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cons" class="md-nav__link">
    CONS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    performance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling" class="md-nav__link">
    scaling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-vs-nosql" class="md-nav__link">
    SQL vs NOSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection" class="md-nav__link">
    connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting" class="md-nav__link">
    Selecting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-remote-access-for-users" class="md-nav__link">
    enable remote access for users
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#psql" class="md-nav__link">
    PSQL
  </a>
  
    <nav class="md-nav" aria-label="PSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting" class="md-nav__link">
    connecting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute-multiple-commands-from-file" class="md-nav__link">
    execute multiple commands from file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meta-commands" class="md-nav__link">
    meta commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-password" class="md-nav__link">
    change password
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-hardcoding-password" class="md-nav__link">
    avoid hardcoding password
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-commands" class="md-nav__link">
    SQL commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    logs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-databases" class="md-nav__link">
    listing databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-database-siz" class="md-nav__link">
    get database siz
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-big-tables" class="md-nav__link">
    select big tables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-row-count" class="md-nav__link">
    get row count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#before-designing-database" class="md-nav__link">
    before designing database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-paraameters-of-running-programs" class="md-nav__link">
    change paraameters of running programs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find-current-configuration-settings" class="md-nav__link">
    find current configuration settings
  </a>
  
    <nav class="md-nav" aria-label="find current configuration settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-non-default-parameters" class="md-nav__link">
    get non default parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reload-configuration-file" class="md-nav__link">
    reload configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diferrent-configuration-for-differen-users" class="md-nav__link">
    diferrent configuration for differen users
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-specification" class="md-nav__link">
    configuration specification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-external-modules-to-postgresql" class="md-nav__link">
    adding external modules to postgresql
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one-connection-per-user" class="md-nav__link">
    one connection per user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-connection-pool" class="md-nav__link">
    create connection pool
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>overall</h1>

<h2 id="cons">CONS</h2>
<ul>
<li>30 years of development</li>
<li>excellent SQL standart compliance</li>
<li>client server architecture</li>
<li>highly concurrent</li>
<li>configurable</li>
<li>stability and performance</li>
<li>suppport of relational post-relational or document and key value types</li>
</ul>
<h2 id="performance">performance</h2>
<p>posgreSQL can archive mor than 1 million read per second on 4 socket server
and 30 write transactions per second with full durability</p>
<p>posgreSQL provides <strong>MVCC</strong> which enables readers and writers avoid blocking
each other</p>
<h2 id="scaling">scaling</h2>
<p>posgreSQL scales well on single node up to 4 cpu sockets wel upp to hundreds of active sessions and thousend of connected sessions when session pool.
it also provides <strong>HOT STANDBY</strong> mode multi node write scalability</p>
<h2 id="sql-vs-nosql">SQL vs NOSQL</h2>
<p>PostgreSQL follows the SQL Standard very closely. SQL itself does not force any particular
type of model to be used, so PostgreSQL can easily be used for many types of models at the
same time, in the same database.
With PostgreSQL acting as a relational database, we can utilize any level of
denormalization, from the full Third Normal Form, to the more normalized Star Schema
models. PostgreSQL extends the relational model to provide arrays, row types, and range
types.
A document-centric database is also possible using PostgreSQL's text, XML, and binary
JSON (JSONB) data types, supported by indexes optimized for documents and by full text
search capabilities.</p>
<h2 id="connection">connection</h2>
<p>Each connection will typically be authenticated in some way. This is defined at the server
level: client authentication will not be optional at connection time, if the administrator has
configured the server to require it.
Once you've connected, each connection can have one active transaction at a time and one
fully active statement at any time.
The server will have a defined limit on the number of connections it can serve, so a
connection request can be refused if the server is oversubscribed.</p>
<h2 id="selecting">Selecting</h2>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">SELECT</span> <span class="n">current_database</span><span class="p">();</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="k">SELECT</span> <span class="k">current_user</span><span class="p">;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">SELECT</span> <span class="k">version</span><span class="p">();</span>
</code></pre></div>
From PostgreSQL version 9.1 onwards, you can also use psql's new meta-command,
conninfo. It displays most of the preceding information in a single line:
postgres=# conninfo
You are connected to database postgres as user postgres via socket in
/var/run/postgresql at port 5432</p>
<h2 id="enable-remote-access-for-users">enable remote access for users</h2>
<p>By default, PostgreSQL gives access to clients who connect using Unix sockets, provided the
database user is the same as the system's username. Here, we'll show you how to enable
other connections.</p>
<ul>
<li>Type: For this, host means a remote connection.
Database: For this, all means for all databases. Other names match exactly, except
when prefixed with a plus (+) symbol, in which case we mean a group role rather
than a single user. You can also specify a comma-separated list of users, or use
the @ symbol to include a file with a list of users. You can even specify sameuser,
so that the rule matches when you specify the same name for the user and</li>
<li>database.</li>
<li>User: For this, all means "for all users". Other names match exactly, except when
prefixed with a plus (+) symbol, in which case we mean a group role rather than a
single user. You can also specify a comma-separated list of users or use the @
symbol to include a file with a list of users.</li>
<li>CIDR-ADDRESS: This consists of two parts: IP address and subnet mask.
The subnet mask is specified as the number of leading bits of the IP address
that make up the mask. Thus, /0 means 0 bits of the IP address, so that 
all IP addresses will be matched. For example, 192.168.0.0/24 would mean match
the first 24 bits, so any IP address of the form 192.168.0.x would match. You can
also use samenet or samehost.</li>
<li>Method: For this, md5 means that PostgreSQL will ask the client to provide a
password encrypted with MD5. Another common setting is trust, which
effectively means no authentication. Other authentication methods include
GSSAPI, SSPI, LDAP, RADIUS, and PAM. PostgreSQL connections can also be
made using SSL, in which case client SSL certificates provide authentication. See
the Using SSL certificates to authenticate the client recipe in Chapter 6, Security, for
more details about this.</li>
</ul>
<p>Don't use the password setting, as this sends the password in plain text. This is not a real
security issue if your connection is encrypted with SSL, and there are normally no
downsides with MD5 anyway, and you have extra security for non-SSL connections</p>
<h2 id="psql">PSQL</h2>
<h3 id="connecting">connecting</h3>
<p>psql -h myhost -p 5432 -d mydb -U myuser
psql postgresql://myuser@myhost:5432/mydb</p>
<h3 id="execute-multiple-commands-from-file">execute multiple commands from file</h3>
<p>psql -f examples.sql </p>
<p>psql -c "SELECT current_time" –f examples.sql -c "SELECT current_time"</p>
<h3 id="meta-commands">meta commands</h3>
<p>? psql meta commands
h specific sql commands</p>
<p>h DELETE</p>
<h2 id="comments">comments</h2>
<p>-- This is a single-line comment</p>
<p>/<em>
* Multi-line comment
</em>/</p>
<h2 id="change-password">change password</h2>
<p>ALTER USER postgres PASSWORD ' md53175bce1d3201d16594cebf9d7eb3f9d';</p>
<h2 id="avoid-hardcoding-password">avoid hardcoding password</h2>
<p>Not all database users need passwords; some databases use other means of authentication.
Don't do this step unless you know you will be using password authentication and you
know your password.
First, remove the hardcoded password from where you had set it previously. Completely
remove the password = xxxx text from the connection string in a program. Otherwise,
when you test the password file, the hardcoded setting will override the details you are just
about to place in the file. Keeping the password hardcoded and in the password file is not
any better. Using PGPASSWORD is not recommended either, so remove that also.
If you think someone may have seen the password, then change your password before
placing it in the secure password file</p>
<p>host:port:dbname:user:password</p>
<p>myhost:5432:postgres:sriggs:moresecure</p>
<p>The password file is located using an environment variable named PGPASSFILE. If
PGPASSFILE is not set, then a default filename and location must be searched for, as
follows:
On *nix systems, look for ~/.pgpass
On Windows systems, look for %APPDATA%postgresqlpgpass.conf, where
%APPDATA% is the application data subdirectory in the path (for me, that would be
C:)</p>
<p>postgreSQL 9.3 and later versions ship the pg_isready utility, which checks the
status of a database server, either local or remote, by establishing a minimal
connection. Only the hostname and port are mandatory, which is great if you
don't know the database name, username, or password. The following outcomes
are possible</p>
<h2 id="sql-commands">SQL commands</h2>
<p>server uptime </p>
<p><code>postgres=# SELECT date_trunc('second',
current_timestamp - pg_postmaster_start_time()) as uptime;</code></p>
<p>database files</p>
<p>/var/lib/postgres/</p>
<p>/var/lib/pgsql/data/</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>export PGROOT=/var/lib/pgsql/
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>export PGRELEASE=9.6
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>export PGSERVERNAME=mamba
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>export PGDATA=$PGROOT/$PGRELEASE/$PGSERVERNAME
</code></pre></div>
<p>Finally, you must run initdb to actually initialize the data directory, as noted earlier, and
custom administration scripts should be prepared to automate actions such as starting or
stopping the database server when the system undergoes similar procedures.</p>
<p>Note that server applications such as initdb can only work with one major PostgreSQL
version. On distributions that allow several major versions, such as Debian or Ubuntu, these
applications are placed in dedicated directories, which are not put in the default command
path. This means that if you just type initdb, then the system will not find the executable,
and you will get an error message.</p>
<h2 id="logs">logs</h2>
<p>/var/log/postgresql postgresql-R.r-main.log,
/var/lib/pgsql/data/pg_log.</p>
<h2 id="listing-databases">listing databases</h2>
<p>from command line</p>
<p>pqsl -l</p>
<h2 id="get-database-siz">get database siz</h2>
<p>postgres=# select pg_relation_size('pgbench_accounts');
SELECT sum(pg_database_size(datname)) from pg_database;
SELECT pg_database_size(current_database());</p>
<h2 id="select-big-tables">select big tables</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">SELECT</span> <span class="k">table_name</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="p">,</span><span class="n">pg_relation_size</span><span class="p">(</span><span class="n">table_schema</span> <span class="o">||</span> <span class="s1">&#39;.&#39;</span> <span class="o">||</span> <span class="k">table_name</span><span class="p">)</span> <span class="k">as</span> <span class="k">size</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">tables</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="k">WHERE</span> <span class="n">table_schema</span> <span class="k">NOT</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;information_schema&#39;</span><span class="p">,</span> <span class="s1">&#39;pg_catalog&#39;</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="k">ORDER</span> <span class="k">BY</span> <span class="k">size</span> <span class="k">DESC</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>
<h2 id="get-row-count">get row count</h2>
<p>SELECT count(*) FROM table;</p>
<h2 id="before-designing-database">before designing database</h2>
<p>Write a document that covers the following items:
- Database design–plan your database design
- Calculate the initial database sizing
- Transaction analysis--how will we access the database?
- Look at the most frequent access paths
- What are the requirements for response times?
- Hardware configuration
- Initial performance thoughts--will all of the data fit into the RAM?
- Choose the operating system and filesystem type
- How do we partition the disk?
- Localization plan
- Decide the server encoding, locale, and time zone
- Access and security plan
- Identify client systems and specify required drivers
- Create roles according to a plan for access control
- Specify pg_hba.conf
- Maintenance plan--who will keep it working? How?
- Availability plan--consider the availability requirements
- checkpoint_timeout (for more details on this parameter, see the Understanding
- and controlling crash recovery recipe in Chapter 11, Backup and Recovery)
- Plan your backup mechanism and test it
- High-availability plan
- Decide which form of replication you'll need, if any</p>
<h2 id="change-paraameters-of-running-programs">change paraameters of running programs</h2>
<p>SET work_mem = '16MB';
SET LOCAL work_mem='16MB';</p>
<p>RESET work_mem;
RESET ALL;</p>
<h2 id="find-current-configuration-settings">find current configuration settings</h2>
<p>SHOW work_mem;</p>
<p>SELECT * FROM PG_SETTINGS WHERE name ='work_mem';</p>
<p>SHOW config_file; from posgres</p>
<h3 id="get-non-default-parameters">get non default parameters</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="k">source</span><span class="p">,</span> <span class="n">setting</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">FROM</span> <span class="n">pg_settings</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="k">WHERE</span> <span class="k">source</span> <span class="o">!=</span> <span class="s1">&#39;default&#39;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="k">AND</span> <span class="k">source</span> <span class="o">!=</span> <span class="s1">&#39;override&#39;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">ORDER</span> <span class="k">by</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<p>The parameter file is the main location for defining parameter values for the PostgreSQL
server. All the parameters can be set in the parameter file, which is known as
postgresql.conf.
There are also two other parameter files: pg_hba.conf and pg_ident.conf. Both of these
relate to connections and security, so we'll cover them in the appropriate chapters that
follow.</p>
<h2 id="reload-configuration-file">reload configuration file</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>pg_ctl reload
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>pg_ctlcluster 9.6 main reload
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>sudo systemctl reload postgresql@9.6-main
</code></pre></div>
<h2 id="diferrent-configuration-for-differen-users">diferrent configuration for differen users</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">ALTER</span> <span class="k">DATABASE</span> <span class="n">saas</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="k">SET</span> <span class="n">configuration_parameter</span> <span class="o">=</span> <span class="n">value1</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="k">ALTER</span> <span class="k">ROLE</span> <span class="n">Simon</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="k">SET</span> <span class="n">configuration_parameter</span> <span class="o">=</span> <span class="n">value2</span><span class="p">;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="k">ALTER</span> <span class="k">ROLE</span> <span class="n">Simon</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="k">IN</span> <span class="k">DATABASE</span> <span class="n">saas</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="k">SET</span> <span class="n">configuration_parameter</span> <span class="o">=</span> <span class="n">value3</span><span class="p">;</span>
</code></pre></div>
<h2 id="configuration-specification">configuration specification</h2>
<p>If your database is larger than 32 MB, then you'll probably benefit from increasing
shared_buffers. You can increase this to a much larger value, but remember that running
out of memory induces many problems
For instance, PostgreSQL is able to store information to the disk when the available memory
is too small, and it employs sophisticated algorithms to treat each case differently and to
place each piece of data either in the disk or in the memory, depending on each use case.</p>
<p><strong>good practice to set a low value in your postgresql.conf and increment slowly to ensure
that you get the benefits from each change</strong></p>
<p>Configuration
[ 89 ]
On the other hand, overstating the amount of available memory confuses such abilities and
results in suboptimal behavior. For instance, if the memory is swapped to disk, then
PostgreSQL will inefficiently treat all data as if it were the RAM. Another unfortunate
circumstance is when the Linux Out-Of-Memory (OOM) killer terminates one of the
various processes spawned by the PostgreSQL server. So, it's better to be conservative. It is
good practice to set a low value in your postgresql.conf and increment slowly to ensure
that you get the benefits from each change.
If you increase shared_buffers and you're running on a non-Windows server, you will
almost certainly need to increase the value of the SHMMAX OS parameter (and on some
platforms, other parameters as well).
On Linux, Mac OS, and FreeBSD, you will need to either edit the /etc/sysctl.conf file or
use sysctl -w with the following values:
For Linux, use kernel.shmmax=value
For Mac OS, use kern.sysv.shmmax=value
For FreeBSD, use kern.ipc.shmmax=value</p>
<h2 id="adding-external-modules-to-postgresql">adding external modules to postgresql</h2>
<ul>
<li>contrib includes many functions they are available always but not active
there are more than 40 of them</li>
<li>PGXN network based extenstion sharing from different authors</li>
</ul>
<h2 id="one-connection-per-user">one connection per user</h2>
<p>ALTER ROLE fred CONNECTION LIMIT 1;</p>
<p>You can eliminate this restriction by setting the value to -1.
It's possible to set the limit to zero or any positive integer. You can set this to a number
other than max_connections, though it is up to you to make sense of that if you do.
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">FROM</span> <span class="n">pg_stat_activity</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">WHERE</span> <span class="n">usename</span> <span class="o">=</span> <span class="s1">&#39;fred&#39;</span><span class="p">;</span>
</code></pre></div></p>
<h2 id="_1"></h2>
<p>terminte users session
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="n">pg_terminate_backend</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="k">FROM</span> <span class="n">pg_stat_activity</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">WHERE</span> <span class="n">usename</span> <span class="k">NOT</span> <span class="k">IN</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="p">(</span><span class="k">SELECT</span> <span class="n">usename</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="k">FROM</span> <span class="n">pg_user</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="k">WHERE</span> <span class="n">usesuper</span><span class="p">);</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">WHERE</span> <span class="n">application_name</span> <span class="o">=</span> <span class="s1">&#39;myappname&#39;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="k">WHERE</span> <span class="n">waiting</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="k">WHERE</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;&lt;IDLE&gt; in transaction&#39;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="k">WHERE</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;&lt;IDLE&gt;&#39;</span>
</code></pre></div>
<h2 id="create-connection-pool">create connection pool</h2>
<p>pgbouncer.ini</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c1">;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="c1">; pgbouncer configuration example</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="c1">;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="k">[databases]</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="na">postgres</span> <span class="o">=</span> <span class="s">port=5432 dbname=postgres</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="k">[pgbouncer]</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="na">listen_addr</span> <span class="o">=</span> <span class="s">127.0.0.1</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="na">listen_port</span> <span class="o">=</span> <span class="s">6432</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="na">admin_users</span> <span class="o">=</span> <span class="s">postgres</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="c1">;stats_users = monitoring userid</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="na">auth_type</span> <span class="o">=</span> <span class="s">any</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="c1">; put these files somewhere sensible:</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="na">auth_file</span> <span class="o">=</span> <span class="s">users.txt</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="na">logfile</span> <span class="o">=</span> <span class="s">pgbouncer.log</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="na">pidfile</span> <span class="o">=</span> <span class="s">pgbouncer.pid</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="na">server_reset_query</span> <span class="o">=</span> <span class="s">DISCARD ALL;</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="c1">; default values</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="na">pool_mode</span> <span class="o">=</span> <span class="s">session</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="na">default_pool_size</span> <span class="o">=</span> <span class="s">20</span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="na">log_pooler_errors</span> <span class="o">=</span> <span class="s">0</span>
</code></pre></div>
<p>Create a users.txt file. This must contain the minimum users mentioned in2.
admin_users and stats_users. Its format is very simple: a collection of lines
with a username and a password. Consider the following as an example:</p>
<p>"postgres" ""</p>
<p>You may wish to create the users.txt file by directly copying the details from4.
the server. That can be done using the following psql script:
postgres=&gt; o users.txt
postgres=&gt; t
postgres=&gt; SELECT '"'||rolname||'" "'||rolpassword||'"'
postgres-&gt; FROM pg_authid;
postgres=&gt; q</p>
<p>pgbouncer -d pgbouncer.ini</p>
<p>connect</p>
<p>psql -p 6432 -h 127.0.0.1 -U postgres pgbouncer -c "reload"</p>
<p>Finally, verify that PgBouncer's max_client_conn parameter does not exceed7.
the max_connections parameter on PostgreSQL.</p>
<p>PgBouncer provides connection pooling. If you set pool_mode = transaction, then
PgBouncer will also provide connection concentration. This allows hundreds or even
thousands of incoming connections to be managed, while only a few server connections are
made.</p>
<p>As new connections, transactions, or statements arrive, the pool will increase in size up to
the user-defined maximum values. Those connections will stay around for at most the
server_idle_timeout value before the pool releases them.</p>
<p>The earlier query that creates users.txt includes only database users that have a
password. All other users will have a null rolpassword field, so the whole string evaluates
to NULL, and the line is omitted from the password file. This is intentional; users without a
password represent a security risk, unless they are closely guarded. An example of this is
the postgres system user connecting from the same machine, which bypasses PgBouncer,
and is used only for maintenance by responsible and trusted people.</p>
<p>If you are using pool_mode = transaction or pool_mode = statement, then you can
use the PAUSE command. This waits for the current transaction to complete before holding
further work on that session. Thus, it allows you to perform DDL more easily or restart the
server.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../data_types/" class="md-footer__link md-footer__link--prev" aria-label="Previous: data types" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              data types
            </div>
          </div>
        </a>
      
      
        
        <a href="../post/" class="md-footer__link md-footer__link--next" aria-label="Next: additional" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              additional
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>